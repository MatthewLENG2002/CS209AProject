{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"word-cloud\",\n  computed: {\n    ...mapGetters([\"getIssueNounKeyword\"]),\n    option() {\n      return {\n        dataList: [{\n          name: this.getIssueNounKeyword[0],\n          value: '1',\n          bgColor: 'rgb(57, 193, 207,0.12)',\n          color: '#39c1cf'\n        }, {\n          name: this.getIssueNounKeyword[1],\n          value: '8',\n          bgColor: 'rgb(66, 105, 245,0.12)',\n          color: '#4269f5'\n        }, {\n          name: this.getIssueNounKeyword[2],\n          value: '9',\n          bgColor: 'rgb(184, 107, 215,0.12)',\n          color: '#b86bd7'\n        }, {\n          name: this.getIssueNounKeyword[3],\n          value: '3',\n          bgColor: 'rgba(13,26,168,0.12)',\n          color: '#2e17c2'\n        }, {\n          name: this.getIssueNounKeyword[3],\n          value: '6',\n          bgColor: 'rgb(250, 116, 20,0.12)',\n          color: '#FA7414'\n        }, {\n          name: this.getIssueNounKeyword[4],\n          value: '10',\n          bgColor: 'rgb(255, 171, 30,0.12)',\n          color: '#FFAB1E'\n        }, {\n          name: this.getIssueNounKeyword[5],\n          value: '2',\n          bgColor: 'rgb(136, 104, 217,0.12)',\n          color: '#8868D9'\n        }, {\n          name: this.getIssueNounKeyword[6],\n          value: '5',\n          bgColor: 'rgb(42, 184, 230,0.12)',\n          color: '#2AB8E6'\n        }, {\n          name: this.getIssueNounKeyword[7],\n          value: '7',\n          bgColor: 'rgb(117, 133, 162,0.12)',\n          color: '#7585A2'\n        }, {\n          name: this.getIssueNounKeyword[8],\n          value: '7',\n          bgColor: 'rgba(48,53,152,0.12)',\n          color: '#071779'\n        }, {\n          name: this.getIssueNounKeyword[9],\n          value: '7',\n          bgColor: 'rgb(243, 84, 83,0.12)',\n          color: '#f35453'\n        }]\n      };\n    }\n  },\n  data() {\n    return {\n      timer: 50,\n      // 球体转动速率\n      radius: 0,\n      // 词云球体面积大小\n      dtr: Math.PI / 180,\n      //鼠标滑过球体转动速度\n      active: false,\n      // 默认加载是否开启转动\n      lasta: 0,\n      // 上下转动\n      lastb: 0.5,\n      // 左右转动\n      distr: true,\n      tspeed: 0,\n      // 鼠标移动上去时球体转动\n      mouseX: 0,\n      mouseY: 0,\n      tagAttrList: [],\n      tagContent: null,\n      cloudContent: null,\n      sinA: '',\n      cosA: '',\n      sinB: '',\n      cosB: '',\n      sinC: '',\n      cosC: ''\n    };\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.radius = document.querySelector('.cloud-box').offsetWidth / 2;\n      this.initWordCloud();\n    });\n  },\n  beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  methods: {\n    // 获取点击文本信息\n    getDataInfo(item) {\n      console.log(item, 'item');\n    },\n    initWordCloud() {\n      this.cloudContent = document.querySelector('.cloud-box');\n      this.tagContent = this.cloudContent.getElementsByTagName('span');\n      for (let i = 0; i < this.tagContent.length; i++) {\n        let tagObj = {};\n        tagObj.offsetWidth = this.tagContent[i].offsetWidth;\n        tagObj.offsetHeight = this.tagContent[i].offsetHeight;\n        this.tagAttrList.push(tagObj);\n      }\n      this.sineCosine(0, 0, 0);\n      this.positionAll();\n      this.cloudContent.onmouseover = () => {\n        this.active = true;\n      };\n      this.cloudContent.onmouseout = () => {\n        this.active = false;\n      };\n      this.cloudContent.onmousemove = ev => {\n        let oEvent = window.event || ev;\n        this.mouseX = oEvent.clientX - (this.cloudContent.offsetLeft + this.cloudContent.offsetWidth / 2);\n        this.mouseY = oEvent.clientY - (this.cloudContent.offsetTop + this.cloudContent.offsetHeight / 2);\n        this.mouseX /= 5;\n        this.mouseY /= 5;\n      };\n      setInterval(this.update, this.timer);\n    },\n    positionAll() {\n      let phi = 0;\n      let theta = 0;\n      let max = this.tagAttrList.length;\n      let aTmp = [];\n      let oFragment = document.createDocumentFragment();\n      //随机排序\n      for (let i = 0; i < this.tagContent.length; i++) {\n        aTmp.push(this.tagContent[i]);\n      }\n      aTmp.sort(() => {\n        return Math.random() < 0.5 ? 1 : -1;\n      });\n      for (let i = 0; i < aTmp.length; i++) {\n        oFragment.appendChild(aTmp[i]);\n      }\n      this.cloudContent.appendChild(oFragment);\n      for (let i = 1; i < max + 1; i++) {\n        if (this.distr) {\n          phi = Math.acos(-1 + (2 * i - 1) / max);\n          theta = Math.sqrt(max * Math.PI) * phi;\n        } else {\n          phi = Math.random() * Math.PI;\n          theta = Math.random() * (2 * Math.PI);\n        }\n        //坐标变换\n        this.tagAttrList[i - 1].cx = this.radius * Math.cos(theta) * Math.sin(phi);\n        this.tagAttrList[i - 1].cy = this.radius * Math.sin(theta) * Math.sin(phi);\n        this.tagAttrList[i - 1].cz = this.radius * Math.cos(phi);\n        this.tagContent[i - 1].style.left = this.tagAttrList[i - 1].cx + this.cloudContent.offsetWidth / 2 - this.tagAttrList[i - 1].offsetWidth / 2 + 'px';\n        this.tagContent[i - 1].style.top = this.tagAttrList[i - 1].cy + this.cloudContent.offsetHeight / 2 - this.tagAttrList[i - 1].offsetHeight / 2 + 'px';\n      }\n    },\n    update() {\n      let angleBasicA;\n      let angleBasicB;\n      if (this.active) {\n        angleBasicA = -Math.min(Math.max(-this.mouseY, -200), 200) / this.radius * this.tspeed;\n        angleBasicB = Math.min(Math.max(-this.mouseX, -200), 200) / this.radius * this.tspeed;\n      } else {\n        angleBasicA = this.lasta * 0.98;\n        angleBasicB = this.lastb * 0.98;\n      }\n\n      //默认转动是后是否需要停下\n      // lasta=a;\n      // lastb=b;\n\n      // if(Math.abs(a)<=0.01 && Math.abs(b)<=0.01)\n      // {\n      // return;\n      // }\n      this.sineCosine(angleBasicA, angleBasicB, 0);\n      for (let j = 0; j < this.tagAttrList.length; j++) {\n        let rx1 = this.tagAttrList[j].cx;\n        let ry1 = this.tagAttrList[j].cy * this.cosA + this.tagAttrList[j].cz * -this.sinA;\n        let rz1 = this.tagAttrList[j].cy * this.sinA + this.tagAttrList[j].cz * this.cosA;\n        let rx2 = rx1 * this.cosB + rz1 * this.sinB;\n        let ry2 = ry1;\n        let rz2 = rx1 * -this.sinB + rz1 * this.cosB;\n        let rx3 = rx2 * this.cosC + ry2 * -this.sinC;\n        let ry3 = rx2 * this.sinC + ry2 * this.cosC;\n        let rz3 = rz2;\n        this.tagAttrList[j].cx = rx3;\n        this.tagAttrList[j].cy = ry3;\n        this.tagAttrList[j].cz = rz3;\n        let per = 350 / (350 + rz3);\n        this.tagAttrList[j].x = rx3 * per - 2;\n        this.tagAttrList[j].y = ry3 * per;\n        this.tagAttrList[j].scale = per;\n        this.tagAttrList[j].alpha = per;\n        this.tagAttrList[j].alpha = (this.tagAttrList[j].alpha - 0.6) * (10 / 6);\n      }\n      this.doPosition();\n      this.depthSort();\n    },\n    doPosition() {\n      let len = this.cloudContent.offsetWidth / 2;\n      let height = this.cloudContent.offsetHeight / 2;\n      for (let i = 0; i < this.tagAttrList.length; i++) {\n        this.tagContent[i].style.left = this.tagAttrList[i].cx + len - this.tagAttrList[i].offsetWidth / 2 + 'px';\n        this.tagContent[i].style.top = this.tagAttrList[i].cy + height - this.tagAttrList[i].offsetHeight / 2 + 'px';\n        // this.tagContent[i].style.fontSize = Math.ceil(12 * this.tagAttrList[i].scale/2) + 8 + 'px';\n        this.tagContent[i].style.fontSize = Math.ceil(12 * this.tagAttrList[i].scale / 2) + 2 + 'px';\n        this.tagContent[i].style.filter = \"alpha(opacity=\" + 100 * this.tagAttrList[i].alpha + \")\";\n        this.tagContent[i].style.opacity = this.tagAttrList[i].alpha;\n      }\n    },\n    depthSort() {\n      let aTmp = [];\n      for (let i = 0; i < this.tagContent.length; i++) {\n        aTmp.push(this.tagContent[i]);\n      }\n      aTmp.sort((item1, item2) => item2.cz - item1.cz);\n      for (let i = 0; i < aTmp.length; i++) {\n        aTmp[i].style.zIndex = i;\n      }\n    },\n    sineCosine(a, b, c) {\n      this.sinA = Math.sin(a * this.dtr);\n      this.cosA = Math.cos(a * this.dtr);\n      this.sinB = Math.sin(b * this.dtr);\n      this.cosB = Math.cos(b * this.dtr);\n      this.sinC = Math.sin(c * this.dtr);\n      this.cosC = Math.cos(c * this.dtr);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["mapGetters","name","computed","option","dataList","getIssueNounKeyword","value","bgColor","color","data","timer","radius","dtr","Math","PI","active","lasta","lastb","distr","tspeed","mouseX","mouseY","tagAttrList","tagContent","cloudContent","sinA","cosA","sinB","cosB","sinC","cosC","mounted","$nextTick","document","querySelector","offsetWidth","initWordCloud","beforeDestroy","clearInterval","methods","getDataInfo","item","console","log","getElementsByTagName","i","length","tagObj","offsetHeight","push","sineCosine","positionAll","onmouseover","onmouseout","onmousemove","ev","oEvent","window","event","clientX","offsetLeft","clientY","offsetTop","setInterval","update","phi","theta","max","aTmp","oFragment","createDocumentFragment","sort","random","appendChild","acos","sqrt","cx","cos","sin","cy","cz","style","left","top","angleBasicA","angleBasicB","min","j","rx1","ry1","rz1","rx2","ry2","rz2","rx3","ry3","rz3","per","x","y","scale","alpha","doPosition","depthSort","len","height","fontSize","ceil","filter","opacity","item1","item2","zIndex","a","b","c"],"sourceRoot":"","sources":["/Users/tangxinyu/IdeaProjects/CS209AProject/cs209a_proj/src/components/WordCloudGraphNoun.vue"],"sourcesContent":["<template>\n  <section class=\"cloud-bed\">\n    <div class=\"cloud-box\">\n      <span\n          v-for=\"(item, index) in option.dataList\"\n          :key=\"index\"\n          @click=\"getDataInfo(item)\"\n          :style=\"{color:item.color,background:item.bgColor}\"\n      >\n        {{ item.name }}\n      </span>\n    </div>\n  </section>\n</template>\n\n<script>\nimport {mapGetters} from \"vuex\";\nexport default {\n  name: \"word-cloud\",\n  computed:{\n    ...mapGetters([\"getIssueNounKeyword\"]),\n    option(){\n      return{\n        dataList: [\n          {\n            name: this.getIssueNounKeyword[0],\n            value: '1',\n            bgColor:'rgb(57, 193, 207,0.12)',\n            color:'#39c1cf',\n          },\n          {\n            name: this.getIssueNounKeyword[1],\n            value: '8',\n            bgColor:'rgb(66, 105, 245,0.12)',\n            color:'#4269f5',\n          },\n          {\n            name: this.getIssueNounKeyword[2],\n            value: '9',\n            bgColor:'rgb(184, 107, 215,0.12)',\n            color:'#b86bd7',\n          },\n          {\n            name: this.getIssueNounKeyword[3],\n            value: '3',\n            bgColor:'rgba(13,26,168,0.12)',\n            color:'#2e17c2',\n          },\n          {\n            name: this.getIssueNounKeyword[3],\n            value: '6',\n            bgColor:'rgb(250, 116, 20,0.12)',\n            color:'#FA7414',\n          },\n          {\n            name: this.getIssueNounKeyword[4],\n            value: '10',\n            bgColor:'rgb(255, 171, 30,0.12)',\n            color:'#FFAB1E',\n          },\n          {\n            name: this.getIssueNounKeyword[5],\n            value: '2',\n            bgColor:'rgb(136, 104, 217,0.12)',\n            color:'#8868D9',\n          },\n          {\n            name: this.getIssueNounKeyword[6],\n            value: '5',\n            bgColor:'rgb(42, 184, 230,0.12)',\n            color:'#2AB8E6',\n          },\n          {\n            name: this.getIssueNounKeyword[7],\n            value: '7',\n            bgColor:'rgb(117, 133, 162,0.12)',\n            color:'#7585A2',\n          },\n          {\n            name: this.getIssueNounKeyword[8],\n            value: '7',\n            bgColor:'rgba(48,53,152,0.12)',\n            color:'#071779',\n          },\n          {\n            name: this.getIssueNounKeyword[9],\n            value: '7',\n            bgColor:'rgb(243, 84, 83,0.12)',\n            color:'#f35453',\n          },\n        ]\n      }\n    }\n  },\n  data() {\n    return {\n      timer: 50, // 球体转动速率\n      radius: 0, // 词云球体面积大小\n      dtr: Math.PI/180, //鼠标滑过球体转动速度\n      active: false, // 默认加载是否开启转动\n      lasta: 0, // 上下转动\n      lastb: 0.5, // 左右转动\n      distr: true,\n      tspeed: 0, // 鼠标移动上去时球体转动\n      mouseX: 0,\n      mouseY: 0,\n      tagAttrList: [],\n      tagContent: null,\n      cloudContent: null,\n      sinA: '',\n      cosA: '',\n      sinB: '',\n      cosB: '',\n      sinC: '',\n      cosC: ''\n    }\n  },\n  mounted () {\n    this.$nextTick(() => {\n      this.radius = document.querySelector('.cloud-box').offsetWidth / 2\n      this.initWordCloud()\n    })\n  },\n  beforeDestroy () {\n    clearInterval(this.timer)\n  },\n  methods:{\n    // 获取点击文本信息\n    getDataInfo (item) {\n      console.log(item, 'item')\n    },\n    initWordCloud () {\n      this.cloudContent = document.querySelector('.cloud-box');\n      this.tagContent = this.cloudContent.getElementsByTagName('span');\n      for (let i = 0; i < this.tagContent.length; i++) {\n        let tagObj = {};\n        tagObj.offsetWidth = this.tagContent[i].offsetWidth;\n        tagObj.offsetHeight = this.tagContent[i].offsetHeight;\n        this.tagAttrList.push(tagObj);\n      }\n      this.sineCosine(0, 0, 0);\n      this.positionAll();\n      this.cloudContent.onmouseover = () => {\n        this.active=true;\n      };\n      this.cloudContent.onmouseout = () => {\n        this.active=false;\n      };\n      this.cloudContent.onmousemove = (ev) => {\n        let oEvent = window.event || ev;\n        this.mouseX = oEvent.clientX - (this.cloudContent.offsetLeft + this.cloudContent.offsetWidth/2);\n        this.mouseY = oEvent.clientY - (this.cloudContent.offsetTop + this.cloudContent.offsetHeight/2);\n        this.mouseX/= 5;\n        this.mouseY/= 5;\n      };\n      setInterval(this.update, this.timer);\n    },\n    positionAll () {\n      let phi = 0;\n      let theta = 0;\n      let max = this.tagAttrList.length;\n      let aTmp = [];\n      let oFragment = document.createDocumentFragment();\n      //随机排序\n      for (let i=0; i < this.tagContent.length; i++) {\n        aTmp.push(this.tagContent[i]);\n      }\n      aTmp.sort(() => {\n        return Math.random() < 0.5 ? 1 : -1;\n      });\n      for (let i = 0; i < aTmp.length; i++) {\n        oFragment.appendChild(aTmp[i]);\n      }\n      this.cloudContent.appendChild(oFragment);\n      for(let i = 1; i < max + 1; i++){\n        if (this.distr) {\n          phi = Math.acos(-1 + (2 * i - 1) / max);\n          theta = Math.sqrt(max * Math.PI) * phi;\n        } else {\n          phi = Math.random() * (Math.PI);\n          theta = Math.random() * (2 * Math.PI);\n        }\n        //坐标变换\n        this.tagAttrList[i-1].cx = this.radius * Math.cos(theta) * Math.sin(phi);\n        this.tagAttrList[i-1].cy = this.radius * Math.sin(theta) * Math.sin(phi);\n        this.tagAttrList[i-1].cz = this.radius * Math.cos(phi);\n        this.tagContent[i-1].style.left = this.tagAttrList[i-1].cx + this.cloudContent.offsetWidth / 2 - this.tagAttrList[i-1].offsetWidth / 2 + 'px';\n        this.tagContent[i-1].style.top = this.tagAttrList[i-1].cy + this.cloudContent.offsetHeight / 2 - this.tagAttrList[i-1].offsetHeight / 2 + 'px';\n      }\n    },\n    update () {\n      let angleBasicA;\n      let angleBasicB;\n\n      if (this.active) {\n        angleBasicA = (-Math.min(Math.max(-this.mouseY, -200 ), 200) / this.radius) * this.tspeed;\n        angleBasicB = (Math.min(Math.max(-this.mouseX, -200 ), 200) / this.radius) * this.tspeed;\n      } else {\n        angleBasicA = this.lasta * 0.98;\n        angleBasicB = this.lastb * 0.98;\n      }\n\n      //默认转动是后是否需要停下\n      // lasta=a;\n      // lastb=b;\n\n      // if(Math.abs(a)<=0.01 && Math.abs(b)<=0.01)\n      // {\n      // return;\n      // }\n      this.sineCosine(angleBasicA, angleBasicB, 0);\n      for(let j = 0; j < this.tagAttrList.length; j++) {\n        let rx1 = this.tagAttrList[j].cx;\n        let ry1 = this.tagAttrList[j].cy * this.cosA + this.tagAttrList[j].cz * (-this.sinA);\n        let rz1 = this.tagAttrList[j].cy * this.sinA + this.tagAttrList[j].cz * this.cosA;\n\n        let rx2 = rx1 * this.cosB + rz1 * this.sinB;\n        let ry2 = ry1;\n        let rz2 = rx1 * (-this.sinB) + rz1 * this.cosB;\n\n        let rx3 = rx2 * this.cosC + ry2 * (-this.sinC);\n        let ry3 = rx2 * this.sinC + ry2 * this.cosC;\n        let rz3 = rz2;\n        this.tagAttrList[j].cx = rx3;\n        this.tagAttrList[j].cy = ry3;\n        this.tagAttrList[j].cz = rz3;\n\n        let per = 350 / (350 + rz3);\n\n        this.tagAttrList[j].x = rx3 * per - 2;\n        this.tagAttrList[j].y = ry3 * per;\n        this.tagAttrList[j].scale = per;\n        this.tagAttrList[j].alpha = per;\n\n        this.tagAttrList[j].alpha = (this.tagAttrList[j].alpha - 0.6) * (10/6);\n      }\n      this.doPosition();\n      this.depthSort();\n    },\n    doPosition() {\n      let len = this.cloudContent.offsetWidth/2;\n      let height = this.cloudContent.offsetHeight/2;\n      for (let i=0;i < this.tagAttrList.length;i++) {\n        this.tagContent[i].style.left = this.tagAttrList[i].cx + len - this.tagAttrList[i].offsetWidth/2 + 'px';\n        this.tagContent[i].style.top = this.tagAttrList[i].cy + height - this.tagAttrList[i].offsetHeight/2 + 'px';\n        // this.tagContent[i].style.fontSize = Math.ceil(12 * this.tagAttrList[i].scale/2) + 8 + 'px';\n        this.tagContent[i].style.fontSize = Math.ceil(12 * this.tagAttrList[i].scale/2) +2 + 'px';\n        this.tagContent[i].style.filter = \"alpha(opacity=\"+100 * this.tagAttrList[i].alpha+\")\";\n        this.tagContent[i].style.opacity = this.tagAttrList[i].alpha;\n      }\n    },\n    depthSort(){\n      let aTmp = [];\n      for (let i = 0; i < this.tagContent.length; i++) {\n        aTmp.push(this.tagContent[i]);\n      }\n      aTmp.sort((item1, item2) => item2.cz - item1.cz);\n      for (let i = 0; i < aTmp.length; i++) {\n        aTmp[i].style.zIndex=i;\n      }\n    },\n    sineCosine (a, b, c) {\n      this.sinA = Math.sin(a * this.dtr);\n      this.cosA = Math.cos(a * this.dtr);\n      this.sinB = Math.sin(b * this.dtr);\n      this.cosB = Math.cos(b * this.dtr);\n      this.sinC = Math.sin(c * this.dtr);\n      this.cosC = Math.cos(c * this.dtr);\n    }\n  }\n};\n</script>\n\n\n<style scoped>\n.cloud-bed {\n  width: 200px;\n  height: 200px;\n  margin: auto;\n}\n.cloud-box{\n  position:relative;\n  margin:20px auto 0px;\n  width: 100%;\n  height: 100%;\n  background:\t#00000000;\n}\n.cloud-box span{\n  position: absolute;\n  padding: 3px 6px;\n  top: 0px;\n  font-weight: bold;\n  text-decoration:none;\n  left:0px;\n  background-image: linear-gradient(to bottom, red, #fff);\n  /*background-clip: text;*/\n  color: transparent;\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  text-align: center;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  /* line-height: 50px;\n  overflow:hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis; */\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}