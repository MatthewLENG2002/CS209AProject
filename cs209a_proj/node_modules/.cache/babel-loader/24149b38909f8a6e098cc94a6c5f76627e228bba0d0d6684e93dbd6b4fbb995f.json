{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport env from '../core/env.js';\nimport { applyTransform } from '../core/vector.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport * as colorTool from '../tool/color.js';\nimport * as textContain from '../graphic/text/parse.js';\nimport Displayable from '../graphic/Displayable.js';\nimport ZRImage from '../graphic/Image.js';\nimport Text from '../graphic/TSpan.js';\nimport Path from '../graphic/Path.js';\nimport PathProxy from '../core/PathProxy.js';\nimport Gradient from '../graphic/Gradient.js';\nimport * as vmlCore from './core.js';\nvar CMD = PathProxy.CMD;\nvar round = Math.round;\nvar sqrt = Math.sqrt;\nvar abs = Math.abs;\nvar cos = Math.cos;\nvar sin = Math.sin;\nvar mathMax = Math.max;\nif (!env.canvasSupported) {\n  var comma = ',';\n  var imageTransformPrefix = 'progid:DXImageTransform.Microsoft';\n  var Z = 21600;\n  var Z2 = Z / 2;\n  var ZLEVEL_BASE = 100000;\n  var Z_BASE = 1000;\n  var initRootElStyle = function (el) {\n    el.style.cssText = 'position:absolute;left:0;top:0;width:1px;height:1px;';\n    el.coordsize = Z + ',' + Z;\n    el.coordorigin = '0,0';\n  };\n  var encodeHtmlAttribute = function (s) {\n    return String(s).replace(/&/g, '&amp;').replace(/\"/g, '&quot;');\n  };\n  var rgb2Str = function (r, g, b) {\n    return 'rgb(' + [r, g, b].join(',') + ')';\n  };\n  var append = function (parent, child) {\n    if (child && parent && child.parentNode !== parent) {\n      parent.appendChild(child);\n    }\n  };\n  var remove = function (parent, child) {\n    if (child && parent && child.parentNode === parent) {\n      parent.removeChild(child);\n    }\n  };\n  var getZIndex = function (zlevel, z, z2) {\n    return (parseFloat(zlevel) || 0) * ZLEVEL_BASE + (parseFloat(z) || 0) * Z_BASE + z2;\n  };\n  var parsePercent = textHelper.parsePercent;\n  var setColorAndOpacity = function (el, color, opacity) {\n    var colorArr = colorTool.parse(color);\n    opacity = +opacity;\n    if (isNaN(opacity)) {\n      opacity = 1;\n    }\n    if (colorArr) {\n      el.color = rgb2Str(colorArr[0], colorArr[1], colorArr[2]);\n      el.opacity = opacity * colorArr[3];\n    }\n  };\n  var getColorAndAlpha = function (color) {\n    var colorArr = colorTool.parse(color);\n    return [rgb2Str(colorArr[0], colorArr[1], colorArr[2]), colorArr[3]];\n  };\n  var updateFillNode = function (el, style, zrEl) {\n    var fill = style.fill;\n    if (fill != null) {\n      if (fill instanceof Gradient) {\n        var gradientType;\n        var angle = 0;\n        var focus = [0, 0];\n        var shift = 0;\n        var expansion = 1;\n        var rect = zrEl.getBoundingRect();\n        var rectWidth = rect.width;\n        var rectHeight = rect.height;\n        if (fill.type === 'linear') {\n          gradientType = 'gradient';\n          var transform = zrEl.transform;\n          var p0 = [fill.x * rectWidth, fill.y * rectHeight];\n          var p1 = [fill.x2 * rectWidth, fill.y2 * rectHeight];\n          if (transform) {\n            applyTransform(p0, p0, transform);\n            applyTransform(p1, p1, transform);\n          }\n          var dx = p1[0] - p0[0];\n          var dy = p1[1] - p0[1];\n          angle = Math.atan2(dx, dy) * 180 / Math.PI;\n          if (angle < 0) {\n            angle += 360;\n          }\n          if (angle < 1e-6) {\n            angle = 0;\n          }\n        } else {\n          gradientType = 'gradientradial';\n          var p0 = [fill.x * rectWidth, fill.y * rectHeight];\n          var transform = zrEl.transform;\n          var scale = zrEl.scale;\n          var width = rectWidth;\n          var height = rectHeight;\n          focus = [(p0[0] - rect.x) / width, (p0[1] - rect.y) / height];\n          if (transform) {\n            applyTransform(p0, p0, transform);\n          }\n          width /= scale[0] * Z;\n          height /= scale[1] * Z;\n          var dimension = mathMax(width, height);\n          shift = 2 * 0 / dimension;\n          expansion = 2 * fill.r / dimension - shift;\n        }\n        var stops = fill.colorStops.slice();\n        stops.sort(function (cs1, cs2) {\n          return cs1.offset - cs2.offset;\n        });\n        var length = stops.length;\n        var colorAndAlphaList = [];\n        var colors = [];\n        for (var i = 0; i < length; i++) {\n          var stop = stops[i];\n          var colorAndAlpha = getColorAndAlpha(stop.color);\n          colors.push(stop.offset * expansion + shift + ' ' + colorAndAlpha[0]);\n          if (i === 0 || i === length - 1) {\n            colorAndAlphaList.push(colorAndAlpha);\n          }\n        }\n        if (length >= 2) {\n          var color1 = colorAndAlphaList[0][0];\n          var color2 = colorAndAlphaList[1][0];\n          var opacity1 = colorAndAlphaList[0][1] * style.opacity;\n          var opacity2 = colorAndAlphaList[1][1] * style.opacity;\n          el.type = gradientType;\n          el.method = 'none';\n          el.focus = '100%';\n          el.angle = angle;\n          el.color = color1;\n          el.color2 = color2;\n          el.colors = colors.join(',');\n          el.opacity = opacity2;\n          el.opacity2 = opacity1;\n        }\n        if (gradientType === 'radial') {\n          el.focusposition = focus.join(',');\n        }\n      } else {\n        setColorAndOpacity(el, fill, style.opacity);\n      }\n    }\n  };\n  var updateStrokeNode = function (el, style) {\n    if (style.lineDash) {\n      el.dashstyle = style.lineDash.join(' ');\n    }\n    if (style.stroke != null && !(style.stroke instanceof Gradient)) {\n      setColorAndOpacity(el, style.stroke, style.opacity);\n    }\n  };\n  var updateFillAndStroke = function (vmlEl, type, style, zrEl) {\n    var isFill = type === 'fill';\n    var el = vmlEl.getElementsByTagName(type)[0];\n    if (style[type] != null && style[type] !== 'none' && (isFill || !isFill && style.lineWidth)) {\n      vmlEl[isFill ? 'filled' : 'stroked'] = 'true';\n      if (style[type] instanceof Gradient) {\n        remove(vmlEl, el);\n      }\n      if (!el) {\n        el = vmlCore.createNode(type);\n      }\n      isFill ? updateFillNode(el, style, zrEl) : updateStrokeNode(el, style);\n      append(vmlEl, el);\n    } else {\n      vmlEl[isFill ? 'filled' : 'stroked'] = 'false';\n      remove(vmlEl, el);\n    }\n  };\n  var points = [[], [], []];\n  var pathDataToString = function (path, m) {\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    var str = [];\n    var nPoint;\n    var cmdStr;\n    var cmd;\n    var i;\n    var xi;\n    var yi;\n    var data = path.data;\n    var dataLength = path.len();\n    for (i = 0; i < dataLength;) {\n      cmd = data[i++];\n      cmdStr = '';\n      nPoint = 0;\n      switch (cmd) {\n        case M:\n          cmdStr = ' m ';\n          nPoint = 1;\n          xi = data[i++];\n          yi = data[i++];\n          points[0][0] = xi;\n          points[0][1] = yi;\n          break;\n        case L:\n          cmdStr = ' l ';\n          nPoint = 1;\n          xi = data[i++];\n          yi = data[i++];\n          points[0][0] = xi;\n          points[0][1] = yi;\n          break;\n        case Q:\n        case C:\n          cmdStr = ' c ';\n          nPoint = 3;\n          var x1 = data[i++];\n          var y1 = data[i++];\n          var x2 = data[i++];\n          var y2 = data[i++];\n          var x3;\n          var y3;\n          if (cmd === Q) {\n            x3 = x2;\n            y3 = y2;\n            x2 = (x2 + 2 * x1) / 3;\n            y2 = (y2 + 2 * y1) / 3;\n            x1 = (xi + 2 * x1) / 3;\n            y1 = (yi + 2 * y1) / 3;\n          } else {\n            x3 = data[i++];\n            y3 = data[i++];\n          }\n          points[0][0] = x1;\n          points[0][1] = y1;\n          points[1][0] = x2;\n          points[1][1] = y2;\n          points[2][0] = x3;\n          points[2][1] = y3;\n          xi = x3;\n          yi = y3;\n          break;\n        case A:\n          var x = 0;\n          var y = 0;\n          var sx = 1;\n          var sy = 1;\n          var angle = 0;\n          if (m) {\n            x = m[4];\n            y = m[5];\n            sx = sqrt(m[0] * m[0] + m[1] * m[1]);\n            sy = sqrt(m[2] * m[2] + m[3] * m[3]);\n            angle = Math.atan2(-m[1] / sy, m[0] / sx);\n          }\n          var cx = data[i++];\n          var cy = data[i++];\n          var rx = data[i++];\n          var ry = data[i++];\n          var startAngle = data[i++] + angle;\n          var endAngle = data[i++] + startAngle + angle;\n          i++;\n          var clockwise = data[i++];\n          var x0 = cx + cos(startAngle) * rx;\n          var y0 = cy + sin(startAngle) * ry;\n          var x1 = cx + cos(endAngle) * rx;\n          var y1 = cy + sin(endAngle) * ry;\n          var type = clockwise ? ' wa ' : ' at ';\n          if (Math.abs(x0 - x1) < 1e-4) {\n            if (Math.abs(endAngle - startAngle) > 1e-2) {\n              if (clockwise) {\n                x0 += 270 / Z;\n              }\n            } else {\n              if (Math.abs(y0 - cy) < 1e-4) {\n                if (clockwise && x0 < cx || !clockwise && x0 > cx) {\n                  y1 -= 270 / Z;\n                } else {\n                  y1 += 270 / Z;\n                }\n              } else if (clockwise && y0 < cy || !clockwise && y0 > cy) {\n                x1 += 270 / Z;\n              } else {\n                x1 -= 270 / Z;\n              }\n            }\n          }\n          str.push(type, round(((cx - rx) * sx + x) * Z - Z2), comma, round(((cy - ry) * sy + y) * Z - Z2), comma, round(((cx + rx) * sx + x) * Z - Z2), comma, round(((cy + ry) * sy + y) * Z - Z2), comma, round((x0 * sx + x) * Z - Z2), comma, round((y0 * sy + y) * Z - Z2), comma, round((x1 * sx + x) * Z - Z2), comma, round((y1 * sy + y) * Z - Z2));\n          xi = x1;\n          yi = y1;\n          break;\n        case CMD.R:\n          var p0 = points[0];\n          var p1 = points[1];\n          p0[0] = data[i++];\n          p0[1] = data[i++];\n          p1[0] = p0[0] + data[i++];\n          p1[1] = p0[1] + data[i++];\n          if (m) {\n            applyTransform(p0, p0, m);\n            applyTransform(p1, p1, m);\n          }\n          p0[0] = round(p0[0] * Z - Z2);\n          p1[0] = round(p1[0] * Z - Z2);\n          p0[1] = round(p0[1] * Z - Z2);\n          p1[1] = round(p1[1] * Z - Z2);\n          str.push(' m ', p0[0], comma, p0[1], ' l ', p1[0], comma, p0[1], ' l ', p1[0], comma, p1[1], ' l ', p0[0], comma, p1[1]);\n          break;\n        case CMD.Z:\n          str.push(' x ');\n      }\n      if (nPoint > 0) {\n        str.push(cmdStr);\n        for (var k = 0; k < nPoint; k++) {\n          var p = points[k];\n          m && applyTransform(p, p, m);\n          str.push(round(p[0] * Z - Z2), comma, round(p[1] * Z - Z2), k < nPoint - 1 ? comma : '');\n        }\n      }\n    }\n    return str.join('');\n  };\n  Path.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n    var vmlEl = this._vmlEl;\n    if (!vmlEl) {\n      vmlEl = vmlCore.createNode('shape');\n      initRootElStyle(vmlEl);\n      this._vmlEl = vmlEl;\n    }\n    updateFillAndStroke(vmlEl, 'fill', style, this);\n    updateFillAndStroke(vmlEl, 'stroke', style, this);\n    var m = this.transform;\n    var needTransform = m != null;\n    var strokeEl = vmlEl.getElementsByTagName('stroke')[0];\n    if (strokeEl) {\n      var lineWidth = style.lineWidth;\n      if (needTransform && !style.strokeNoScale) {\n        var det = m[0] * m[3] - m[1] * m[2];\n        lineWidth *= sqrt(abs(det));\n      }\n      strokeEl.weight = lineWidth + 'px';\n    }\n    var path = this.path || (this.path = new PathProxy());\n    if (this.__dirtyPath) {\n      path.beginPath();\n      path.subPixelOptimize = false;\n      this.buildPath(path, this.shape);\n      path.toStatic();\n      this.__dirtyPath = false;\n    }\n    vmlEl.path = pathDataToString(path, this.transform);\n    vmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2);\n    append(vmlRoot, vmlEl);\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, this.getBoundingRect());\n    } else {\n      this.removeRectText(vmlRoot);\n    }\n  };\n  Path.prototype.onRemove = function (vmlRoot) {\n    remove(vmlRoot, this._vmlEl);\n    this.removeRectText(vmlRoot);\n  };\n  Path.prototype.onAdd = function (vmlRoot) {\n    append(vmlRoot, this._vmlEl);\n    this.appendRectText(vmlRoot);\n  };\n  var isImage = function (img) {\n    return typeof img === 'object' && img.tagName && img.tagName.toUpperCase() === 'IMG';\n  };\n  ZRImage.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n    var image = style.image;\n    var ow;\n    var oh;\n    if (isImage(image)) {\n      var src = image.src;\n      if (src === this._imageSrc) {\n        ow = this._imageWidth;\n        oh = this._imageHeight;\n      } else {\n        var imageRuntimeStyle = image.runtimeStyle;\n        var oldRuntimeWidth = imageRuntimeStyle.width;\n        var oldRuntimeHeight = imageRuntimeStyle.height;\n        imageRuntimeStyle.width = 'auto';\n        imageRuntimeStyle.height = 'auto';\n        ow = image.width;\n        oh = image.height;\n        imageRuntimeStyle.width = oldRuntimeWidth;\n        imageRuntimeStyle.height = oldRuntimeHeight;\n        this._imageSrc = src;\n        this._imageWidth = ow;\n        this._imageHeight = oh;\n      }\n      image = src;\n    } else {\n      if (image === this._imageSrc) {\n        ow = this._imageWidth;\n        oh = this._imageHeight;\n      }\n    }\n    if (!image) {\n      return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var sw = style.sWidth;\n    var sh = style.sHeight;\n    var sx = style.sx || 0;\n    var sy = style.sy || 0;\n    var hasCrop = sw && sh;\n    var vmlEl = this._vmlEl;\n    if (!vmlEl) {\n      vmlEl = vmlCore.doc.createElement('div');\n      initRootElStyle(vmlEl);\n      this._vmlEl = vmlEl;\n    }\n    var vmlElStyle = vmlEl.style;\n    var hasRotation = false;\n    var m;\n    var scaleX = 1;\n    var scaleY = 1;\n    if (this.transform) {\n      m = this.transform;\n      scaleX = sqrt(m[0] * m[0] + m[1] * m[1]);\n      scaleY = sqrt(m[2] * m[2] + m[3] * m[3]);\n      hasRotation = m[1] || m[2];\n    }\n    if (hasRotation) {\n      var p0 = [x, y];\n      var p1 = [x + dw, y];\n      var p2 = [x, y + dh];\n      var p3 = [x + dw, y + dh];\n      applyTransform(p0, p0, m);\n      applyTransform(p1, p1, m);\n      applyTransform(p2, p2, m);\n      applyTransform(p3, p3, m);\n      var maxX = mathMax(p0[0], p1[0], p2[0], p3[0]);\n      var maxY = mathMax(p0[1], p1[1], p2[1], p3[1]);\n      var transformFilter = [];\n      transformFilter.push('M11=', m[0] / scaleX, comma, 'M12=', m[2] / scaleY, comma, 'M21=', m[1] / scaleX, comma, 'M22=', m[3] / scaleY, comma, 'Dx=', round(x * scaleX + m[4]), comma, 'Dy=', round(y * scaleY + m[5]));\n      vmlElStyle.padding = '0 ' + round(maxX) + 'px ' + round(maxY) + 'px 0';\n      vmlElStyle.filter = imageTransformPrefix + '.Matrix(' + transformFilter.join('') + ', SizingMethod=clip)';\n    } else {\n      if (m) {\n        x = x * scaleX + m[4];\n        y = y * scaleY + m[5];\n      }\n      vmlElStyle.filter = '';\n      vmlElStyle.left = round(x) + 'px';\n      vmlElStyle.top = round(y) + 'px';\n    }\n    var imageEl = this._imageEl;\n    var cropEl = this._cropEl;\n    if (!imageEl) {\n      imageEl = vmlCore.doc.createElement('div');\n      this._imageEl = imageEl;\n    }\n    var imageELStyle = imageEl.style;\n    if (hasCrop) {\n      if (!(ow && oh)) {\n        var tmpImage = new Image();\n        var self = this;\n        tmpImage.onload = function () {\n          tmpImage.onload = null;\n          ow = tmpImage.width;\n          oh = tmpImage.height;\n          imageELStyle.width = round(scaleX * ow * dw / sw) + 'px';\n          imageELStyle.height = round(scaleY * oh * dh / sh) + 'px';\n          self._imageWidth = ow;\n          self._imageHeight = oh;\n          self._imageSrc = image;\n        };\n        tmpImage.src = image;\n      } else {\n        imageELStyle.width = round(scaleX * ow * dw / sw) + 'px';\n        imageELStyle.height = round(scaleY * oh * dh / sh) + 'px';\n      }\n      if (!cropEl) {\n        cropEl = vmlCore.doc.createElement('div');\n        cropEl.style.overflow = 'hidden';\n        this._cropEl = cropEl;\n      }\n      var cropElStyle = cropEl.style;\n      cropElStyle.width = round((dw + sx * dw / sw) * scaleX);\n      cropElStyle.height = round((dh + sy * dh / sh) * scaleY);\n      cropElStyle.filter = imageTransformPrefix + '.Matrix(Dx=' + -sx * dw / sw * scaleX + ',Dy=' + -sy * dh / sh * scaleY + ')';\n      if (!cropEl.parentNode) {\n        vmlEl.appendChild(cropEl);\n      }\n      if (imageEl.parentNode !== cropEl) {\n        cropEl.appendChild(imageEl);\n      }\n    } else {\n      imageELStyle.width = round(scaleX * dw) + 'px';\n      imageELStyle.height = round(scaleY * dh) + 'px';\n      vmlEl.appendChild(imageEl);\n      if (cropEl && cropEl.parentNode) {\n        vmlEl.removeChild(cropEl);\n        this._cropEl = null;\n      }\n    }\n    var filterStr = '';\n    var alpha = style.opacity;\n    if (alpha < 1) {\n      filterStr += '.Alpha(opacity=' + round(alpha * 100) + ') ';\n    }\n    filterStr += imageTransformPrefix + '.AlphaImageLoader(src=' + image + ', SizingMethod=scale)';\n    imageELStyle.filter = filterStr;\n    vmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2);\n    append(vmlRoot, vmlEl);\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, this.getBoundingRect());\n    }\n  };\n  ZRImage.prototype.onRemove = function (vmlRoot) {\n    remove(vmlRoot, this._vmlEl);\n    this._vmlEl = null;\n    this._cropEl = null;\n    this._imageEl = null;\n    this.removeRectText(vmlRoot);\n  };\n  ZRImage.prototype.onAdd = function (vmlRoot) {\n    append(vmlRoot, this._vmlEl);\n    this.appendRectText(vmlRoot);\n  };\n  var DEFAULT_STYLE_NORMAL = 'normal';\n  var fontStyleCache = {};\n  var fontStyleCacheCount = 0;\n  var MAX_FONT_CACHE_SIZE = 100;\n  var fontEl = document.createElement('div');\n  var getFontStyle = function (fontString) {\n    var fontStyle = fontStyleCache[fontString];\n    if (!fontStyle) {\n      if (fontStyleCacheCount > MAX_FONT_CACHE_SIZE) {\n        fontStyleCacheCount = 0;\n        fontStyleCache = {};\n      }\n      var style = fontEl.style;\n      var fontFamily;\n      try {\n        style.font = fontString;\n        fontFamily = style.fontFamily.split(',')[0];\n      } catch (e) {}\n      fontStyle = {\n        style: style.fontStyle || DEFAULT_STYLE_NORMAL,\n        variant: style.fontVariant || DEFAULT_STYLE_NORMAL,\n        weight: style.fontWeight || DEFAULT_STYLE_NORMAL,\n        size: parseFloat(style.fontSize || 12) | 0,\n        family: fontFamily || 'Microsoft YaHei'\n      };\n      fontStyleCache[fontString] = fontStyle;\n      fontStyleCacheCount++;\n    }\n    return fontStyle;\n  };\n  var textMeasureEl;\n  textContain.$override('measureText', function (text, textFont) {\n    var doc = vmlCore.doc;\n    if (!textMeasureEl) {\n      textMeasureEl = doc.createElement('div');\n      textMeasureEl.style.cssText = 'position:absolute;top:-20000px;left:0;' + 'padding:0;margin:0;border:none;white-space:pre;';\n      vmlCore.doc.body.appendChild(textMeasureEl);\n    }\n    try {\n      textMeasureEl.style.font = textFont;\n    } catch (ex) {}\n    textMeasureEl.innerHTML = '';\n    textMeasureEl.appendChild(doc.createTextNode(text));\n    return {\n      width: textMeasureEl.offsetWidth\n    };\n  });\n  var tmpRect = new BoundingRect(0, 0, 0, 0);\n  var drawRectText = function (vmlRoot, rect, textRect, fromTextEl) {\n    var style = this.style;\n    this.__dirty && textHelper.normalizeTextStyle(style, true);\n    var text = style.text;\n    text != null && (text += '');\n    if (!text) {\n      return;\n    }\n    if (style.rich) {\n      var contentBlock = textContain.parseRichText(text, style);\n      text = [];\n      for (var i = 0; i < contentBlock.lines.length; i++) {\n        var tokens = contentBlock.lines[i].tokens;\n        var textLine = [];\n        for (var j = 0; j < tokens.length; j++) {\n          textLine.push(tokens[j].text);\n        }\n        text.push(textLine.join(''));\n      }\n      text = text.join('\\n');\n    }\n    var x;\n    var y;\n    var align = style.textAlign;\n    var verticalAlign = style.textVerticalAlign;\n    var fontStyle = getFontStyle(style.font);\n    var font = fontStyle.style + ' ' + fontStyle.variant + ' ' + fontStyle.weight + ' ' + fontStyle.size + 'px \"' + fontStyle.family + '\"';\n    textRect = textRect || textContain.getBoundingRect(text, font, align, verticalAlign, style.textPadding, style.textLineHeight);\n    var m = this.transform;\n    if (m && !fromTextEl) {\n      tmpRect.copy(rect);\n      tmpRect.applyTransform(m);\n      rect = tmpRect;\n    }\n    if (!fromTextEl) {\n      var textPosition = style.textPosition;\n      if (textPosition instanceof Array) {\n        x = rect.x + parsePercent(textPosition[0], rect.width);\n        y = rect.y + parsePercent(textPosition[1], rect.height);\n        align = align || 'left';\n      } else {\n        var res = this.calculateTextPosition ? this.calculateTextPosition({}, style, rect) : textContain.calculateTextPosition({}, style, rect);\n        x = res.x;\n        y = res.y;\n        align = align || res.align;\n        verticalAlign = verticalAlign || res.verticalAlign;\n      }\n    } else {\n      x = rect.x;\n      y = rect.y;\n    }\n    x = textContain.adjustTextX(x, textRect.width, align);\n    y = textContain.adjustTextY(y, textRect.height, verticalAlign);\n    y += textRect.height / 2;\n    var createNode = vmlCore.createNode;\n    var textVmlEl = this._textVmlEl;\n    var pathEl;\n    var textPathEl;\n    var skewEl;\n    if (!textVmlEl) {\n      textVmlEl = createNode('line');\n      pathEl = createNode('path');\n      textPathEl = createNode('textpath');\n      skewEl = createNode('skew');\n      textPathEl.style['v-text-align'] = 'left';\n      initRootElStyle(textVmlEl);\n      pathEl.textpathok = true;\n      textPathEl.on = true;\n      textVmlEl.from = '0 0';\n      textVmlEl.to = '1000 0.05';\n      append(textVmlEl, skewEl);\n      append(textVmlEl, pathEl);\n      append(textVmlEl, textPathEl);\n      this._textVmlEl = textVmlEl;\n    } else {\n      skewEl = textVmlEl.firstChild;\n      pathEl = skewEl.nextSibling;\n      textPathEl = pathEl.nextSibling;\n    }\n    var coords = [x, y];\n    var textVmlElStyle = textVmlEl.style;\n    if (m && fromTextEl) {\n      applyTransform(coords, coords, m);\n      skewEl.on = true;\n      skewEl.matrix = m[0].toFixed(3) + comma + m[2].toFixed(3) + comma + m[1].toFixed(3) + comma + m[3].toFixed(3) + ',0,0';\n      skewEl.offset = (round(coords[0]) || 0) + ',' + (round(coords[1]) || 0);\n      skewEl.origin = '0 0';\n      textVmlElStyle.left = '0px';\n      textVmlElStyle.top = '0px';\n    } else {\n      skewEl.on = false;\n      textVmlElStyle.left = round(x) + 'px';\n      textVmlElStyle.top = round(y) + 'px';\n    }\n    textPathEl.string = encodeHtmlAttribute(text);\n    try {\n      textPathEl.style.font = font;\n    } catch (e) {}\n    updateFillAndStroke(textVmlEl, 'fill', {\n      fill: style.textFill,\n      opacity: style.opacity\n    }, this);\n    updateFillAndStroke(textVmlEl, 'stroke', {\n      stroke: style.textStroke,\n      opacity: style.opacity,\n      lineDash: style.lineDash || null\n    }, this);\n    textVmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2);\n    append(vmlRoot, textVmlEl);\n  };\n  var removeRectText = function (vmlRoot) {\n    remove(vmlRoot, this._textVmlEl);\n    this._textVmlEl = null;\n  };\n  var appendRectText = function (vmlRoot) {\n    append(vmlRoot, this._textVmlEl);\n  };\n  var list = [RectText, Displayable, ZRImage, Path, Text];\n  for (var i = 0; i < list.length; i++) {\n    var proto = list[i].prototype;\n    proto.drawRectText = drawRectText;\n    proto.removeRectText = removeRectText;\n    proto.appendRectText = appendRectText;\n  }\n  Text.prototype.brushVML = function (vmlRoot) {\n    var style = this.style;\n    if (style.text != null) {\n      this.drawRectText(vmlRoot, {\n        x: style.x || 0,\n        y: style.y || 0,\n        width: 0,\n        height: 0\n      }, this.getBoundingRect(), true);\n    } else {\n      this.removeRectText(vmlRoot);\n    }\n  };\n  Text.prototype.onRemove = function (vmlRoot) {\n    this.removeRectText(vmlRoot);\n  };\n  Text.prototype.onAdd = function (vmlRoot) {\n    this.appendRectText(vmlRoot);\n  };\n}","map":{"version":3,"names":["env","applyTransform","BoundingRect","colorTool","textContain","Displayable","ZRImage","Text","Path","PathProxy","Gradient","vmlCore","CMD","round","Math","sqrt","abs","cos","sin","mathMax","max","canvasSupported","comma","imageTransformPrefix","Z","Z2","ZLEVEL_BASE","Z_BASE","initRootElStyle","el","style","cssText","coordsize","coordorigin","encodeHtmlAttribute","s","String","replace","rgb2Str","r","g","b","join","append","parent","child","parentNode","appendChild","remove","removeChild","getZIndex","zlevel","z","z2","parseFloat","parsePercent","textHelper","setColorAndOpacity","color","opacity","colorArr","parse","isNaN","getColorAndAlpha","updateFillNode","zrEl","fill","gradientType","angle","focus","shift","expansion","rect","getBoundingRect","rectWidth","width","rectHeight","height","type","transform","p0","x","y","p1","x2","y2","dx","dy","atan2","PI","scale","dimension","stops","colorStops","slice","sort","cs1","cs2","offset","length","colorAndAlphaList","colors","i","stop","colorAndAlpha","push","color1","color2","opacity1","opacity2","method","focusposition","updateStrokeNode","lineDash","dashstyle","stroke","updateFillAndStroke","vmlEl","isFill","getElementsByTagName","lineWidth","createNode","points","pathDataToString","path","m","M","C","L","A","Q","str","nPoint","cmdStr","cmd","xi","yi","data","dataLength","len","x1","y1","x3","y3","sx","sy","cx","cy","rx","ry","startAngle","endAngle","clockwise","x0","y0","R","k","p","prototype","brushVML","vmlRoot","_vmlEl","needTransform","strokeEl","strokeNoScale","det","weight","__dirtyPath","beginPath","subPixelOptimize","buildPath","shape","toStatic","zIndex","text","drawRectText","removeRectText","onRemove","onAdd","appendRectText","isImage","img","tagName","toUpperCase","image","ow","oh","src","_imageSrc","_imageWidth","_imageHeight","imageRuntimeStyle","runtimeStyle","oldRuntimeWidth","oldRuntimeHeight","dw","dh","sw","sWidth","sh","sHeight","hasCrop","doc","createElement","vmlElStyle","hasRotation","scaleX","scaleY","p2","p3","maxX","maxY","transformFilter","padding","filter","left","top","imageEl","_imageEl","cropEl","_cropEl","imageELStyle","tmpImage","Image","self","onload","overflow","cropElStyle","filterStr","alpha","DEFAULT_STYLE_NORMAL","fontStyleCache","fontStyleCacheCount","MAX_FONT_CACHE_SIZE","fontEl","document","getFontStyle","fontString","fontStyle","fontFamily","font","split","e","variant","fontVariant","fontWeight","size","fontSize","family","textMeasureEl","$override","textFont","body","ex","innerHTML","createTextNode","offsetWidth","tmpRect","textRect","fromTextEl","__dirty","normalizeTextStyle","rich","contentBlock","parseRichText","lines","tokens","textLine","j","align","textAlign","verticalAlign","textVerticalAlign","textPadding","textLineHeight","copy","textPosition","Array","res","calculateTextPosition","adjustTextX","adjustTextY","textVmlEl","_textVmlEl","pathEl","textPathEl","skewEl","textpathok","on","from","to","firstChild","nextSibling","coords","textVmlElStyle","matrix","toFixed","origin","string","textFill","textStroke","list","RectText","proto"],"sources":["/Users/tangxinyu/WebstormProjects/cs209a_proj/node_modules/zrender/lib/vml/graphic.js"],"sourcesContent":["import env from '../core/env.js';\nimport { applyTransform } from '../core/vector.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport * as colorTool from '../tool/color.js';\nimport * as textContain from '../graphic/text/parse.js';\nimport Displayable from '../graphic/Displayable.js';\nimport ZRImage from '../graphic/Image.js';\nimport Text from '../graphic/TSpan.js';\nimport Path from '../graphic/Path.js';\nimport PathProxy from '../core/PathProxy.js';\nimport Gradient from '../graphic/Gradient.js';\nimport * as vmlCore from './core.js';\nvar CMD = PathProxy.CMD;\nvar round = Math.round;\nvar sqrt = Math.sqrt;\nvar abs = Math.abs;\nvar cos = Math.cos;\nvar sin = Math.sin;\nvar mathMax = Math.max;\nif (!env.canvasSupported) {\n    var comma = ',';\n    var imageTransformPrefix = 'progid:DXImageTransform.Microsoft';\n    var Z = 21600;\n    var Z2 = Z / 2;\n    var ZLEVEL_BASE = 100000;\n    var Z_BASE = 1000;\n    var initRootElStyle = function (el) {\n        el.style.cssText = 'position:absolute;left:0;top:0;width:1px;height:1px;';\n        el.coordsize = Z + ',' + Z;\n        el.coordorigin = '0,0';\n    };\n    var encodeHtmlAttribute = function (s) {\n        return String(s).replace(/&/g, '&amp;').replace(/\"/g, '&quot;');\n    };\n    var rgb2Str = function (r, g, b) {\n        return 'rgb(' + [r, g, b].join(',') + ')';\n    };\n    var append = function (parent, child) {\n        if (child && parent && child.parentNode !== parent) {\n            parent.appendChild(child);\n        }\n    };\n    var remove = function (parent, child) {\n        if (child && parent && child.parentNode === parent) {\n            parent.removeChild(child);\n        }\n    };\n    var getZIndex = function (zlevel, z, z2) {\n        return (parseFloat(zlevel) || 0) * ZLEVEL_BASE + (parseFloat(z) || 0) * Z_BASE + z2;\n    };\n    var parsePercent = textHelper.parsePercent;\n    var setColorAndOpacity = function (el, color, opacity) {\n        var colorArr = colorTool.parse(color);\n        opacity = +opacity;\n        if (isNaN(opacity)) {\n            opacity = 1;\n        }\n        if (colorArr) {\n            el.color = rgb2Str(colorArr[0], colorArr[1], colorArr[2]);\n            el.opacity = opacity * colorArr[3];\n        }\n    };\n    var getColorAndAlpha = function (color) {\n        var colorArr = colorTool.parse(color);\n        return [\n            rgb2Str(colorArr[0], colorArr[1], colorArr[2]),\n            colorArr[3]\n        ];\n    };\n    var updateFillNode = function (el, style, zrEl) {\n        var fill = style.fill;\n        if (fill != null) {\n            if (fill instanceof Gradient) {\n                var gradientType;\n                var angle = 0;\n                var focus = [0, 0];\n                var shift = 0;\n                var expansion = 1;\n                var rect = zrEl.getBoundingRect();\n                var rectWidth = rect.width;\n                var rectHeight = rect.height;\n                if (fill.type === 'linear') {\n                    gradientType = 'gradient';\n                    var transform = zrEl.transform;\n                    var p0 = [fill.x * rectWidth, fill.y * rectHeight];\n                    var p1 = [fill.x2 * rectWidth, fill.y2 * rectHeight];\n                    if (transform) {\n                        applyTransform(p0, p0, transform);\n                        applyTransform(p1, p1, transform);\n                    }\n                    var dx = p1[0] - p0[0];\n                    var dy = p1[1] - p0[1];\n                    angle = Math.atan2(dx, dy) * 180 / Math.PI;\n                    if (angle < 0) {\n                        angle += 360;\n                    }\n                    if (angle < 1e-6) {\n                        angle = 0;\n                    }\n                }\n                else {\n                    gradientType = 'gradientradial';\n                    var p0 = [fill.x * rectWidth, fill.y * rectHeight];\n                    var transform = zrEl.transform;\n                    var scale = zrEl.scale;\n                    var width = rectWidth;\n                    var height = rectHeight;\n                    focus = [\n                        (p0[0] - rect.x) / width,\n                        (p0[1] - rect.y) / height\n                    ];\n                    if (transform) {\n                        applyTransform(p0, p0, transform);\n                    }\n                    width /= scale[0] * Z;\n                    height /= scale[1] * Z;\n                    var dimension = mathMax(width, height);\n                    shift = 2 * 0 / dimension;\n                    expansion = 2 * fill.r / dimension - shift;\n                }\n                var stops = fill.colorStops.slice();\n                stops.sort(function (cs1, cs2) {\n                    return cs1.offset - cs2.offset;\n                });\n                var length = stops.length;\n                var colorAndAlphaList = [];\n                var colors = [];\n                for (var i = 0; i < length; i++) {\n                    var stop = stops[i];\n                    var colorAndAlpha = getColorAndAlpha(stop.color);\n                    colors.push(stop.offset * expansion + shift + ' ' + colorAndAlpha[0]);\n                    if (i === 0 || i === length - 1) {\n                        colorAndAlphaList.push(colorAndAlpha);\n                    }\n                }\n                if (length >= 2) {\n                    var color1 = colorAndAlphaList[0][0];\n                    var color2 = colorAndAlphaList[1][0];\n                    var opacity1 = colorAndAlphaList[0][1] * style.opacity;\n                    var opacity2 = colorAndAlphaList[1][1] * style.opacity;\n                    el.type = gradientType;\n                    el.method = 'none';\n                    el.focus = '100%';\n                    el.angle = angle;\n                    el.color = color1;\n                    el.color2 = color2;\n                    el.colors = colors.join(',');\n                    el.opacity = opacity2;\n                    el.opacity2 = opacity1;\n                }\n                if (gradientType === 'radial') {\n                    el.focusposition = focus.join(',');\n                }\n            }\n            else {\n                setColorAndOpacity(el, fill, style.opacity);\n            }\n        }\n    };\n    var updateStrokeNode = function (el, style) {\n        if (style.lineDash) {\n            el.dashstyle = style.lineDash.join(' ');\n        }\n        if (style.stroke != null && !(style.stroke instanceof Gradient)) {\n            setColorAndOpacity(el, style.stroke, style.opacity);\n        }\n    };\n    var updateFillAndStroke = function (vmlEl, type, style, zrEl) {\n        var isFill = type === 'fill';\n        var el = vmlEl.getElementsByTagName(type)[0];\n        if (style[type] != null && style[type] !== 'none' && (isFill || (!isFill && style.lineWidth))) {\n            vmlEl[isFill ? 'filled' : 'stroked'] = 'true';\n            if (style[type] instanceof Gradient) {\n                remove(vmlEl, el);\n            }\n            if (!el) {\n                el = vmlCore.createNode(type);\n            }\n            isFill ? updateFillNode(el, style, zrEl) : updateStrokeNode(el, style);\n            append(vmlEl, el);\n        }\n        else {\n            vmlEl[isFill ? 'filled' : 'stroked'] = 'false';\n            remove(vmlEl, el);\n        }\n    };\n    var points = [[], [], []];\n    var pathDataToString = function (path, m) {\n        var M = CMD.M;\n        var C = CMD.C;\n        var L = CMD.L;\n        var A = CMD.A;\n        var Q = CMD.Q;\n        var str = [];\n        var nPoint;\n        var cmdStr;\n        var cmd;\n        var i;\n        var xi;\n        var yi;\n        var data = path.data;\n        var dataLength = path.len();\n        for (i = 0; i < dataLength;) {\n            cmd = data[i++];\n            cmdStr = '';\n            nPoint = 0;\n            switch (cmd) {\n                case M:\n                    cmdStr = ' m ';\n                    nPoint = 1;\n                    xi = data[i++];\n                    yi = data[i++];\n                    points[0][0] = xi;\n                    points[0][1] = yi;\n                    break;\n                case L:\n                    cmdStr = ' l ';\n                    nPoint = 1;\n                    xi = data[i++];\n                    yi = data[i++];\n                    points[0][0] = xi;\n                    points[0][1] = yi;\n                    break;\n                case Q:\n                case C:\n                    cmdStr = ' c ';\n                    nPoint = 3;\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var x3;\n                    var y3;\n                    if (cmd === Q) {\n                        x3 = x2;\n                        y3 = y2;\n                        x2 = (x2 + 2 * x1) / 3;\n                        y2 = (y2 + 2 * y1) / 3;\n                        x1 = (xi + 2 * x1) / 3;\n                        y1 = (yi + 2 * y1) / 3;\n                    }\n                    else {\n                        x3 = data[i++];\n                        y3 = data[i++];\n                    }\n                    points[0][0] = x1;\n                    points[0][1] = y1;\n                    points[1][0] = x2;\n                    points[1][1] = y2;\n                    points[2][0] = x3;\n                    points[2][1] = y3;\n                    xi = x3;\n                    yi = y3;\n                    break;\n                case A:\n                    var x = 0;\n                    var y = 0;\n                    var sx = 1;\n                    var sy = 1;\n                    var angle = 0;\n                    if (m) {\n                        x = m[4];\n                        y = m[5];\n                        sx = sqrt(m[0] * m[0] + m[1] * m[1]);\n                        sy = sqrt(m[2] * m[2] + m[3] * m[3]);\n                        angle = Math.atan2(-m[1] / sy, m[0] / sx);\n                    }\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++] + angle;\n                    var endAngle = data[i++] + startAngle + angle;\n                    i++;\n                    var clockwise = data[i++];\n                    var x0 = cx + cos(startAngle) * rx;\n                    var y0 = cy + sin(startAngle) * ry;\n                    var x1 = cx + cos(endAngle) * rx;\n                    var y1 = cy + sin(endAngle) * ry;\n                    var type = clockwise ? ' wa ' : ' at ';\n                    if (Math.abs(x0 - x1) < 1e-4) {\n                        if (Math.abs(endAngle - startAngle) > 1e-2) {\n                            if (clockwise) {\n                                x0 += 270 / Z;\n                            }\n                        }\n                        else {\n                            if (Math.abs(y0 - cy) < 1e-4) {\n                                if ((clockwise && x0 < cx) || (!clockwise && x0 > cx)) {\n                                    y1 -= 270 / Z;\n                                }\n                                else {\n                                    y1 += 270 / Z;\n                                }\n                            }\n                            else if ((clockwise && y0 < cy) || (!clockwise && y0 > cy)) {\n                                x1 += 270 / Z;\n                            }\n                            else {\n                                x1 -= 270 / Z;\n                            }\n                        }\n                    }\n                    str.push(type, round(((cx - rx) * sx + x) * Z - Z2), comma, round(((cy - ry) * sy + y) * Z - Z2), comma, round(((cx + rx) * sx + x) * Z - Z2), comma, round(((cy + ry) * sy + y) * Z - Z2), comma, round((x0 * sx + x) * Z - Z2), comma, round((y0 * sy + y) * Z - Z2), comma, round((x1 * sx + x) * Z - Z2), comma, round((y1 * sy + y) * Z - Z2));\n                    xi = x1;\n                    yi = y1;\n                    break;\n                case CMD.R:\n                    var p0 = points[0];\n                    var p1 = points[1];\n                    p0[0] = data[i++];\n                    p0[1] = data[i++];\n                    p1[0] = p0[0] + data[i++];\n                    p1[1] = p0[1] + data[i++];\n                    if (m) {\n                        applyTransform(p0, p0, m);\n                        applyTransform(p1, p1, m);\n                    }\n                    p0[0] = round(p0[0] * Z - Z2);\n                    p1[0] = round(p1[0] * Z - Z2);\n                    p0[1] = round(p0[1] * Z - Z2);\n                    p1[1] = round(p1[1] * Z - Z2);\n                    str.push(' m ', p0[0], comma, p0[1], ' l ', p1[0], comma, p0[1], ' l ', p1[0], comma, p1[1], ' l ', p0[0], comma, p1[1]);\n                    break;\n                case CMD.Z:\n                    str.push(' x ');\n            }\n            if (nPoint > 0) {\n                str.push(cmdStr);\n                for (var k = 0; k < nPoint; k++) {\n                    var p = points[k];\n                    m && applyTransform(p, p, m);\n                    str.push(round(p[0] * Z - Z2), comma, round(p[1] * Z - Z2), k < nPoint - 1 ? comma : '');\n                }\n            }\n        }\n        return str.join('');\n    };\n    Path.prototype.brushVML = function (vmlRoot) {\n        var style = this.style;\n        var vmlEl = this._vmlEl;\n        if (!vmlEl) {\n            vmlEl = vmlCore.createNode('shape');\n            initRootElStyle(vmlEl);\n            this._vmlEl = vmlEl;\n        }\n        updateFillAndStroke(vmlEl, 'fill', style, this);\n        updateFillAndStroke(vmlEl, 'stroke', style, this);\n        var m = this.transform;\n        var needTransform = m != null;\n        var strokeEl = vmlEl.getElementsByTagName('stroke')[0];\n        if (strokeEl) {\n            var lineWidth = style.lineWidth;\n            if (needTransform && !style.strokeNoScale) {\n                var det = m[0] * m[3] - m[1] * m[2];\n                lineWidth *= sqrt(abs(det));\n            }\n            strokeEl.weight = lineWidth + 'px';\n        }\n        var path = this.path || (this.path = new PathProxy());\n        if (this.__dirtyPath) {\n            path.beginPath();\n            path.subPixelOptimize = false;\n            this.buildPath(path, this.shape);\n            path.toStatic();\n            this.__dirtyPath = false;\n        }\n        vmlEl.path = pathDataToString(path, this.transform);\n        vmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2);\n        append(vmlRoot, vmlEl);\n        if (style.text != null) {\n            this.drawRectText(vmlRoot, this.getBoundingRect());\n        }\n        else {\n            this.removeRectText(vmlRoot);\n        }\n    };\n    Path.prototype.onRemove = function (vmlRoot) {\n        remove(vmlRoot, this._vmlEl);\n        this.removeRectText(vmlRoot);\n    };\n    Path.prototype.onAdd = function (vmlRoot) {\n        append(vmlRoot, this._vmlEl);\n        this.appendRectText(vmlRoot);\n    };\n    var isImage = function (img) {\n        return (typeof img === 'object') && img.tagName && img.tagName.toUpperCase() === 'IMG';\n    };\n    ZRImage.prototype.brushVML = function (vmlRoot) {\n        var style = this.style;\n        var image = style.image;\n        var ow;\n        var oh;\n        if (isImage(image)) {\n            var src = image.src;\n            if (src === this._imageSrc) {\n                ow = this._imageWidth;\n                oh = this._imageHeight;\n            }\n            else {\n                var imageRuntimeStyle = image.runtimeStyle;\n                var oldRuntimeWidth = imageRuntimeStyle.width;\n                var oldRuntimeHeight = imageRuntimeStyle.height;\n                imageRuntimeStyle.width = 'auto';\n                imageRuntimeStyle.height = 'auto';\n                ow = image.width;\n                oh = image.height;\n                imageRuntimeStyle.width = oldRuntimeWidth;\n                imageRuntimeStyle.height = oldRuntimeHeight;\n                this._imageSrc = src;\n                this._imageWidth = ow;\n                this._imageHeight = oh;\n            }\n            image = src;\n        }\n        else {\n            if (image === this._imageSrc) {\n                ow = this._imageWidth;\n                oh = this._imageHeight;\n            }\n        }\n        if (!image) {\n            return;\n        }\n        var x = style.x || 0;\n        var y = style.y || 0;\n        var dw = style.width;\n        var dh = style.height;\n        var sw = style.sWidth;\n        var sh = style.sHeight;\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        var hasCrop = sw && sh;\n        var vmlEl = this._vmlEl;\n        if (!vmlEl) {\n            vmlEl = vmlCore.doc.createElement('div');\n            initRootElStyle(vmlEl);\n            this._vmlEl = vmlEl;\n        }\n        var vmlElStyle = vmlEl.style;\n        var hasRotation = false;\n        var m;\n        var scaleX = 1;\n        var scaleY = 1;\n        if (this.transform) {\n            m = this.transform;\n            scaleX = sqrt(m[0] * m[0] + m[1] * m[1]);\n            scaleY = sqrt(m[2] * m[2] + m[3] * m[3]);\n            hasRotation = m[1] || m[2];\n        }\n        if (hasRotation) {\n            var p0 = [x, y];\n            var p1 = [x + dw, y];\n            var p2 = [x, y + dh];\n            var p3 = [x + dw, y + dh];\n            applyTransform(p0, p0, m);\n            applyTransform(p1, p1, m);\n            applyTransform(p2, p2, m);\n            applyTransform(p3, p3, m);\n            var maxX = mathMax(p0[0], p1[0], p2[0], p3[0]);\n            var maxY = mathMax(p0[1], p1[1], p2[1], p3[1]);\n            var transformFilter = [];\n            transformFilter.push('M11=', m[0] / scaleX, comma, 'M12=', m[2] / scaleY, comma, 'M21=', m[1] / scaleX, comma, 'M22=', m[3] / scaleY, comma, 'Dx=', round(x * scaleX + m[4]), comma, 'Dy=', round(y * scaleY + m[5]));\n            vmlElStyle.padding = '0 ' + round(maxX) + 'px ' + round(maxY) + 'px 0';\n            vmlElStyle.filter = imageTransformPrefix + '.Matrix('\n                + transformFilter.join('') + ', SizingMethod=clip)';\n        }\n        else {\n            if (m) {\n                x = x * scaleX + m[4];\n                y = y * scaleY + m[5];\n            }\n            vmlElStyle.filter = '';\n            vmlElStyle.left = round(x) + 'px';\n            vmlElStyle.top = round(y) + 'px';\n        }\n        var imageEl = this._imageEl;\n        var cropEl = this._cropEl;\n        if (!imageEl) {\n            imageEl = vmlCore.doc.createElement('div');\n            this._imageEl = imageEl;\n        }\n        var imageELStyle = imageEl.style;\n        if (hasCrop) {\n            if (!(ow && oh)) {\n                var tmpImage = new Image();\n                var self = this;\n                tmpImage.onload = function () {\n                    tmpImage.onload = null;\n                    ow = tmpImage.width;\n                    oh = tmpImage.height;\n                    imageELStyle.width = round(scaleX * ow * dw / sw) + 'px';\n                    imageELStyle.height = round(scaleY * oh * dh / sh) + 'px';\n                    self._imageWidth = ow;\n                    self._imageHeight = oh;\n                    self._imageSrc = image;\n                };\n                tmpImage.src = image;\n            }\n            else {\n                imageELStyle.width = round(scaleX * ow * dw / sw) + 'px';\n                imageELStyle.height = round(scaleY * oh * dh / sh) + 'px';\n            }\n            if (!cropEl) {\n                cropEl = vmlCore.doc.createElement('div');\n                cropEl.style.overflow = 'hidden';\n                this._cropEl = cropEl;\n            }\n            var cropElStyle = cropEl.style;\n            cropElStyle.width = round((dw + sx * dw / sw) * scaleX);\n            cropElStyle.height = round((dh + sy * dh / sh) * scaleY);\n            cropElStyle.filter = imageTransformPrefix + '.Matrix(Dx='\n                + (-sx * dw / sw * scaleX) + ',Dy=' + (-sy * dh / sh * scaleY) + ')';\n            if (!cropEl.parentNode) {\n                vmlEl.appendChild(cropEl);\n            }\n            if (imageEl.parentNode !== cropEl) {\n                cropEl.appendChild(imageEl);\n            }\n        }\n        else {\n            imageELStyle.width = round(scaleX * dw) + 'px';\n            imageELStyle.height = round(scaleY * dh) + 'px';\n            vmlEl.appendChild(imageEl);\n            if (cropEl && cropEl.parentNode) {\n                vmlEl.removeChild(cropEl);\n                this._cropEl = null;\n            }\n        }\n        var filterStr = '';\n        var alpha = style.opacity;\n        if (alpha < 1) {\n            filterStr += '.Alpha(opacity=' + round(alpha * 100) + ') ';\n        }\n        filterStr += imageTransformPrefix + '.AlphaImageLoader(src=' + image + ', SizingMethod=scale)';\n        imageELStyle.filter = filterStr;\n        vmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2);\n        append(vmlRoot, vmlEl);\n        if (style.text != null) {\n            this.drawRectText(vmlRoot, this.getBoundingRect());\n        }\n    };\n    ZRImage.prototype.onRemove = function (vmlRoot) {\n        remove(vmlRoot, this._vmlEl);\n        this._vmlEl = null;\n        this._cropEl = null;\n        this._imageEl = null;\n        this.removeRectText(vmlRoot);\n    };\n    ZRImage.prototype.onAdd = function (vmlRoot) {\n        append(vmlRoot, this._vmlEl);\n        this.appendRectText(vmlRoot);\n    };\n    var DEFAULT_STYLE_NORMAL = 'normal';\n    var fontStyleCache = {};\n    var fontStyleCacheCount = 0;\n    var MAX_FONT_CACHE_SIZE = 100;\n    var fontEl = document.createElement('div');\n    var getFontStyle = function (fontString) {\n        var fontStyle = fontStyleCache[fontString];\n        if (!fontStyle) {\n            if (fontStyleCacheCount > MAX_FONT_CACHE_SIZE) {\n                fontStyleCacheCount = 0;\n                fontStyleCache = {};\n            }\n            var style = fontEl.style;\n            var fontFamily;\n            try {\n                style.font = fontString;\n                fontFamily = style.fontFamily.split(',')[0];\n            }\n            catch (e) {\n            }\n            fontStyle = {\n                style: style.fontStyle || DEFAULT_STYLE_NORMAL,\n                variant: style.fontVariant || DEFAULT_STYLE_NORMAL,\n                weight: style.fontWeight || DEFAULT_STYLE_NORMAL,\n                size: parseFloat(style.fontSize || 12) | 0,\n                family: fontFamily || 'Microsoft YaHei'\n            };\n            fontStyleCache[fontString] = fontStyle;\n            fontStyleCacheCount++;\n        }\n        return fontStyle;\n    };\n    var textMeasureEl;\n    textContain.$override('measureText', function (text, textFont) {\n        var doc = vmlCore.doc;\n        if (!textMeasureEl) {\n            textMeasureEl = doc.createElement('div');\n            textMeasureEl.style.cssText = 'position:absolute;top:-20000px;left:0;'\n                + 'padding:0;margin:0;border:none;white-space:pre;';\n            vmlCore.doc.body.appendChild(textMeasureEl);\n        }\n        try {\n            textMeasureEl.style.font = textFont;\n        }\n        catch (ex) {\n        }\n        textMeasureEl.innerHTML = '';\n        textMeasureEl.appendChild(doc.createTextNode(text));\n        return {\n            width: textMeasureEl.offsetWidth\n        };\n    });\n    var tmpRect = new BoundingRect(0, 0, 0, 0);\n    var drawRectText = function (vmlRoot, rect, textRect, fromTextEl) {\n        var style = this.style;\n        this.__dirty && textHelper.normalizeTextStyle(style, true);\n        var text = style.text;\n        text != null && (text += '');\n        if (!text) {\n            return;\n        }\n        if (style.rich) {\n            var contentBlock = textContain.parseRichText(text, style);\n            text = [];\n            for (var i = 0; i < contentBlock.lines.length; i++) {\n                var tokens = contentBlock.lines[i].tokens;\n                var textLine = [];\n                for (var j = 0; j < tokens.length; j++) {\n                    textLine.push(tokens[j].text);\n                }\n                text.push(textLine.join(''));\n            }\n            text = text.join('\\n');\n        }\n        var x;\n        var y;\n        var align = style.textAlign;\n        var verticalAlign = style.textVerticalAlign;\n        var fontStyle = getFontStyle(style.font);\n        var font = fontStyle.style + ' ' + fontStyle.variant + ' ' + fontStyle.weight + ' '\n            + fontStyle.size + 'px \"' + fontStyle.family + '\"';\n        textRect = textRect || textContain.getBoundingRect(text, font, align, verticalAlign, style.textPadding, style.textLineHeight);\n        var m = this.transform;\n        if (m && !fromTextEl) {\n            tmpRect.copy(rect);\n            tmpRect.applyTransform(m);\n            rect = tmpRect;\n        }\n        if (!fromTextEl) {\n            var textPosition = style.textPosition;\n            if (textPosition instanceof Array) {\n                x = rect.x + parsePercent(textPosition[0], rect.width);\n                y = rect.y + parsePercent(textPosition[1], rect.height);\n                align = align || 'left';\n            }\n            else {\n                var res = this.calculateTextPosition\n                    ? this.calculateTextPosition({}, style, rect)\n                    : textContain.calculateTextPosition({}, style, rect);\n                x = res.x;\n                y = res.y;\n                align = align || res.align;\n                verticalAlign = verticalAlign || res.verticalAlign;\n            }\n        }\n        else {\n            x = rect.x;\n            y = rect.y;\n        }\n        x = textContain.adjustTextX(x, textRect.width, align);\n        y = textContain.adjustTextY(y, textRect.height, verticalAlign);\n        y += textRect.height / 2;\n        var createNode = vmlCore.createNode;\n        var textVmlEl = this._textVmlEl;\n        var pathEl;\n        var textPathEl;\n        var skewEl;\n        if (!textVmlEl) {\n            textVmlEl = createNode('line');\n            pathEl = createNode('path');\n            textPathEl = createNode('textpath');\n            skewEl = createNode('skew');\n            textPathEl.style['v-text-align'] = 'left';\n            initRootElStyle(textVmlEl);\n            pathEl.textpathok = true;\n            textPathEl.on = true;\n            textVmlEl.from = '0 0';\n            textVmlEl.to = '1000 0.05';\n            append(textVmlEl, skewEl);\n            append(textVmlEl, pathEl);\n            append(textVmlEl, textPathEl);\n            this._textVmlEl = textVmlEl;\n        }\n        else {\n            skewEl = textVmlEl.firstChild;\n            pathEl = skewEl.nextSibling;\n            textPathEl = pathEl.nextSibling;\n        }\n        var coords = [x, y];\n        var textVmlElStyle = textVmlEl.style;\n        if (m && fromTextEl) {\n            applyTransform(coords, coords, m);\n            skewEl.on = true;\n            skewEl.matrix = m[0].toFixed(3) + comma + m[2].toFixed(3) + comma\n                + m[1].toFixed(3) + comma + m[3].toFixed(3) + ',0,0';\n            skewEl.offset = (round(coords[0]) || 0) + ',' + (round(coords[1]) || 0);\n            skewEl.origin = '0 0';\n            textVmlElStyle.left = '0px';\n            textVmlElStyle.top = '0px';\n        }\n        else {\n            skewEl.on = false;\n            textVmlElStyle.left = round(x) + 'px';\n            textVmlElStyle.top = round(y) + 'px';\n        }\n        textPathEl.string = encodeHtmlAttribute(text);\n        try {\n            textPathEl.style.font = font;\n        }\n        catch (e) { }\n        updateFillAndStroke(textVmlEl, 'fill', {\n            fill: style.textFill,\n            opacity: style.opacity\n        }, this);\n        updateFillAndStroke(textVmlEl, 'stroke', {\n            stroke: style.textStroke,\n            opacity: style.opacity,\n            lineDash: style.lineDash || null\n        }, this);\n        textVmlEl.style.zIndex = getZIndex(this.zlevel, this.z, this.z2);\n        append(vmlRoot, textVmlEl);\n    };\n    var removeRectText = function (vmlRoot) {\n        remove(vmlRoot, this._textVmlEl);\n        this._textVmlEl = null;\n    };\n    var appendRectText = function (vmlRoot) {\n        append(vmlRoot, this._textVmlEl);\n    };\n    var list = [RectText, Displayable, ZRImage, Path, Text];\n    for (var i = 0; i < list.length; i++) {\n        var proto = list[i].prototype;\n        proto.drawRectText = drawRectText;\n        proto.removeRectText = removeRectText;\n        proto.appendRectText = appendRectText;\n    }\n    Text.prototype.brushVML = function (vmlRoot) {\n        var style = this.style;\n        if (style.text != null) {\n            this.drawRectText(vmlRoot, {\n                x: style.x || 0, y: style.y || 0,\n                width: 0, height: 0\n            }, this.getBoundingRect(), true);\n        }\n        else {\n            this.removeRectText(vmlRoot);\n        }\n    };\n    Text.prototype.onRemove = function (vmlRoot) {\n        this.removeRectText(vmlRoot);\n    };\n    Text.prototype.onAdd = function (vmlRoot) {\n        this.appendRectText(vmlRoot);\n    };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}