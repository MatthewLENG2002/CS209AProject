{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\nvar graphic = require(\"../../util/graphic\");\nvar SymbolClz = require(\"../helper/Symbol\");\nvar _layoutHelper = require(\"./layoutHelper\");\nvar radialCoordinate = _layoutHelper.radialCoordinate;\nvar echarts = require(\"../../echarts\");\nvar bbox = require(\"zrender/lib/core/bbox\");\nvar View = require(\"../../coord/View\");\nvar roamHelper = require(\"../../component/helper/roamHelper\");\nvar RoamController = require(\"../../component/helper/RoamController\");\nvar _cursorHelper = require(\"../../component/helper/cursorHelper\");\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendChartView({\n  type: 'tree',\n  /**\n   * Init the chart\n   * @override\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  init: function (ecModel, api) {\n    /**\n     * @private\n     * @type {module:echarts/data/Tree}\n     */\n    this._oldTree;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this._mainGroup = new graphic.Group();\n    /**\n     * @private\n     * @type {module:echarts/componet/helper/RoamController}\n     */\n\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n    if (layout === 'radial') {\n      group.attr('position', [layoutInfo.x + layoutInfo.width / 2, layoutInfo.y + layoutInfo.height / 2]);\n    } else {\n      group.attr('position', [layoutInfo.x, layoutInfo.y]);\n    }\n    this._updateViewCoordSys(seriesModel, layoutInfo, layout);\n    this._updateController(seriesModel, ecModel, api);\n    var oldData = this._data;\n    var seriesScope = {\n      expandAndCollapse: seriesModel.get('expandAndCollapse'),\n      layout: layout,\n      orient: seriesModel.getOrient(),\n      curvature: seriesModel.get('lineStyle.curveness'),\n      symbolRotate: seriesModel.get('symbolRotate'),\n      symbolOffset: seriesModel.get('symbolOffset'),\n      hoverAnimation: seriesModel.get('hoverAnimation'),\n      useNameLabel: true,\n      fadeIn: true\n    };\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel, seriesScope);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel, seriesScope);\n        return;\n      } // Update node and edge\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel, seriesScope);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel, seriesScope);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n    this._updateNodeAndLinkScale(seriesModel);\n    if (seriesScope.expandAndCollapse === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n    this._data = data;\n  },\n  _updateViewCoordSys: function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n\n    var oldMin = this._min;\n    var oldMax = this._max; // If width or height is 0\n\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'));\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n\n    this.group.attr({\n      position: viewCoordSys.position,\n      scale: viewCoordSys.scale\n    });\n    this._viewCoordSys = viewCoordSys;\n    this._min = min;\n    this._max = max;\n  },\n  _updateController: function (seriesModel, ecModel, api) {\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }, this).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n      this._updateNodeAndLinkScale(seriesModel);\n    }, this);\n  },\n  _updateNodeAndLinkScale: function (seriesModel) {\n    var data = seriesModel.getData();\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n    var invScale = [nodeScale, nodeScale];\n    data.eachItemGraphicEl(function (el, idx) {\n      el.attr('scale', invScale);\n    });\n  },\n  _getNodeGlobalScale: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupScale = coordSys.scale;\n    var groupZoom = groupScale && groupScale[0] || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  },\n  dispose: function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = {};\n  },\n  remove: function () {\n    this._mainGroup.removeAll();\n    this._data = null;\n  }\n});\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y) && data.getItemVisual(dataIndex, 'symbol') !== 'none';\n}\nfunction getTreeNodeStyle(node, itemModel, seriesScope) {\n  seriesScope.itemModel = itemModel;\n  seriesScope.itemStyle = itemModel.getModel('itemStyle').getItemStyle();\n  seriesScope.hoverItemStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  seriesScope.lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  seriesScope.labelModel = itemModel.getModel('label');\n  seriesScope.hoverLabelModel = itemModel.getModel('emphasis.label');\n  if (node.isExpand === false && node.children.length !== 0) {\n    seriesScope.symbolInnerColor = seriesScope.itemStyle.fill;\n  } else {\n    seriesScope.symbolInnerColor = '#fff';\n  }\n  return seriesScope;\n}\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel, seriesScope) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var seriesScope = getTreeNodeStyle(node, itemModel, seriesScope);\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.position[0],\n    y: sourceSymbolEl.position[1],\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, seriesScope);\n    symbolEl.attr('position', [sourceOldLayout.x, sourceOldLayout.y]);\n  } else {\n    symbolEl.updateData(data, dataIndex, seriesScope);\n  }\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  graphic.updateProps(symbolEl, {\n    position: [targetLayout.x, targetLayout.y]\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n  if (seriesScope.layout === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length = realRoot.children.length;\n    var rad;\n    var isLeft;\n    if (targetLayout.x === rootLayout.x && node.isExpand === true) {\n      var center = {};\n      center.x = (realRoot.children[0].getLayout().x + realRoot.children[length - 1].getLayout().x) / 2;\n      center.y = (realRoot.children[0].getLayout().y + realRoot.children[length - 1].getLayout().y) / 2;\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n      isLeft = center.x < rootLayout.x;\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n    var textPosition = isLeft ? 'left' : 'right';\n    var rotate = seriesScope.labelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    symbolPath.setStyle({\n      textPosition: seriesScope.labelModel.get('position') || textPosition,\n      textRotation: rotate == null ? -rad : labelRotateRadian,\n      textOrigin: 'center',\n      verticalAlign: 'middle'\n    });\n  }\n  if (node.parentNode && node.parentNode !== virtualRoot) {\n    var edge = symbolEl.__edge;\n    if (!edge) {\n      edge = symbolEl.__edge = new graphic.BezierCurve({\n        shape: getEdgeShape(seriesScope, sourceOldLayout, sourceOldLayout),\n        style: zrUtil.defaults({\n          opacity: 0,\n          strokeNoScale: true\n        }, seriesScope.lineStyle)\n      });\n    }\n    graphic.updateProps(edge, {\n      shape: getEdgeShape(seriesScope, sourceLayout, targetLayout),\n      style: {\n        opacity: 1\n      }\n    }, seriesModel);\n    group.add(edge);\n  }\n}\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel, seriesScope) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var itemModel = node.getModel();\n  var seriesScope = getTreeNodeStyle(node, itemModel, seriesScope);\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n  graphic.updateProps(symbolEl, {\n    position: [sourceLayout.x + 1, sourceLayout.y + 1]\n  }, seriesModel, function () {\n    group.remove(symbolEl);\n    data.setItemGraphicEl(dataIndex, null);\n  });\n  symbolEl.fadeOut(null, {\n    keepLabel: true\n  });\n  var edge = symbolEl.__edge;\n  if (edge) {\n    graphic.updateProps(edge, {\n      shape: getEdgeShape(seriesScope, sourceLayout, sourceLayout),\n      style: {\n        opacity: 0\n      }\n    }, seriesModel, function () {\n      group.remove(edge);\n    });\n  }\n}\nfunction getEdgeShape(seriesScope, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var orient = seriesScope.orient;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n  if (seriesScope.layout === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * seriesScope.curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * seriesScope.curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x,\n      y1: radialCoor1.y,\n      x2: radialCoor4.x,\n      y2: radialCoor4.y,\n      cpx1: radialCoor2.x,\n      cpy1: radialCoor2.y,\n      cpx2: radialCoor3.x,\n      cpy2: radialCoor3.y\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * seriesScope.curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * seriesScope.curvature;\n      cpy2 = y2;\n    }\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * seriesScope.curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * seriesScope.curvature;\n    }\n  }\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\nmodule.exports = _default;","map":{"version":3,"names":["zrUtil","require","graphic","SymbolClz","_layoutHelper","radialCoordinate","echarts","bbox","View","roamHelper","RoamController","_cursorHelper","onIrrelevantElement","_default","extendChartView","type","init","ecModel","api","_oldTree","_mainGroup","Group","_controller","getZr","_controllerHost","target","group","add","render","seriesModel","payload","data","getData","layoutInfo","layout","get","attr","x","width","y","height","_updateViewCoordSys","_updateController","oldData","_data","seriesScope","expandAndCollapse","orient","getOrient","curvature","symbolRotate","symbolOffset","hoverAnimation","useNameLabel","fadeIn","diff","newIdx","symbolNeedsDraw","updateNode","update","oldIdx","symbolEl","getItemGraphicEl","removeNode","remove","execute","_nodeScaleRatio","_updateNodeAndLinkScale","eachItemGraphicEl","el","dataIndex","off","on","dispatchAction","seriesId","id","points","each","idx","getItemLayout","isNaN","push","min","max","fromPoints","oldMin","_min","oldMax","_max","viewCoordSys","coordinateSystem","zoomLimit","setBoundingRect","setCenter","setZoom","position","scale","_viewCoordSys","controller","controllerHost","setPointerChecker","e","rect","getBoundingRect","applyTransform","transform","contain","enable","zoom","getZoom","updateViewOnPan","dx","dy","updateViewOnZoom","originX","originY","nodeScale","_getNodeGlobalScale","invScale","coordSys","nodeScaleRatio","groupScale","groupZoom","roamZoom","dispose","removeAll","getItemVisual","getTreeNodeStyle","node","itemModel","itemStyle","getModel","getItemStyle","hoverItemStyle","lineStyle","getLineStyle","labelModel","hoverLabelModel","isExpand","children","length","symbolInnerColor","fill","isInit","tree","getNodeByDataIndex","virtualRoot","root","source","parentNode","sourceSymbolEl","sourceLayout","getLayout","sourceOldLayout","rawX","__radialOldRawX","rawY","__radialOldRawY","targetLayout","updateData","__radialRawX","__radialRawY","setItemGraphicEl","updateProps","symbolPath","getSymbolPath","realRoot","rootLayout","rad","isLeft","center","Math","atan2","PI","textPosition","rotate","labelRotateRadian","setStyle","textRotation","textOrigin","verticalAlign","edge","__edge","BezierCurve","shape","getEdgeShape","style","defaults","opacity","strokeNoScale","fadeOut","keepLabel","cpx1","cpy1","cpx2","cpy2","x1","x2","y1","y2","radialCoor1","radialCoor2","radialCoor3","radialCoor4","module","exports"],"sources":["/Users/tangxinyu/WebstormProjects/cs209a_proj/node_modules/echarts/lib/chart/tree/TreeView.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar _layoutHelper = require(\"./layoutHelper\");\n\nvar radialCoordinate = _layoutHelper.radialCoordinate;\n\nvar echarts = require(\"../../echarts\");\n\nvar bbox = require(\"zrender/lib/core/bbox\");\n\nvar View = require(\"../../coord/View\");\n\nvar roamHelper = require(\"../../component/helper/roamHelper\");\n\nvar RoamController = require(\"../../component/helper/RoamController\");\n\nvar _cursorHelper = require(\"../../component/helper/cursorHelper\");\n\nvar onIrrelevantElement = _cursorHelper.onIrrelevantElement;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendChartView({\n  type: 'tree',\n\n  /**\n   * Init the chart\n   * @override\n   * @param  {module:echarts/model/Global} ecModel\n   * @param  {module:echarts/ExtensionAPI} api\n   */\n  init: function (ecModel, api) {\n    /**\n     * @private\n     * @type {module:echarts/data/Tree}\n     */\n    this._oldTree;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this._mainGroup = new graphic.Group();\n    /**\n     * @private\n     * @type {module:echarts/componet/helper/RoamController}\n     */\n\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n\n    if (layout === 'radial') {\n      group.attr('position', [layoutInfo.x + layoutInfo.width / 2, layoutInfo.y + layoutInfo.height / 2]);\n    } else {\n      group.attr('position', [layoutInfo.x, layoutInfo.y]);\n    }\n\n    this._updateViewCoordSys(seriesModel, layoutInfo, layout);\n\n    this._updateController(seriesModel, ecModel, api);\n\n    var oldData = this._data;\n    var seriesScope = {\n      expandAndCollapse: seriesModel.get('expandAndCollapse'),\n      layout: layout,\n      orient: seriesModel.getOrient(),\n      curvature: seriesModel.get('lineStyle.curveness'),\n      symbolRotate: seriesModel.get('symbolRotate'),\n      symbolOffset: seriesModel.get('symbolOffset'),\n      hoverAnimation: seriesModel.get('hoverAnimation'),\n      useNameLabel: true,\n      fadeIn: true\n    };\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel, seriesScope);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel, seriesScope);\n        return;\n      } // Update node and edge\n\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel, seriesScope);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel, seriesScope);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n\n    this._updateNodeAndLinkScale(seriesModel);\n\n    if (seriesScope.expandAndCollapse === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n\n    this._data = data;\n  },\n  _updateViewCoordSys: function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n\n    var oldMin = this._min;\n    var oldMax = this._max; // If width or height is 0\n\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'));\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n\n    this.group.attr({\n      position: viewCoordSys.position,\n      scale: viewCoordSys.scale\n    });\n    this._viewCoordSys = viewCoordSys;\n    this._min = min;\n    this._max = max;\n  },\n  _updateController: function (seriesModel, ecModel, api) {\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }, this).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      this._updateNodeAndLinkScale(seriesModel);\n    }, this);\n  },\n  _updateNodeAndLinkScale: function (seriesModel) {\n    var data = seriesModel.getData();\n\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n\n    var invScale = [nodeScale, nodeScale];\n    data.eachItemGraphicEl(function (el, idx) {\n      el.attr('scale', invScale);\n    });\n  },\n  _getNodeGlobalScale: function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupScale = coordSys.scale;\n    var groupZoom = groupScale && groupScale[0] || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  },\n  dispose: function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = {};\n  },\n  remove: function () {\n    this._mainGroup.removeAll();\n\n    this._data = null;\n  }\n});\n\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y) && data.getItemVisual(dataIndex, 'symbol') !== 'none';\n}\n\nfunction getTreeNodeStyle(node, itemModel, seriesScope) {\n  seriesScope.itemModel = itemModel;\n  seriesScope.itemStyle = itemModel.getModel('itemStyle').getItemStyle();\n  seriesScope.hoverItemStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  seriesScope.lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  seriesScope.labelModel = itemModel.getModel('label');\n  seriesScope.hoverLabelModel = itemModel.getModel('emphasis.label');\n\n  if (node.isExpand === false && node.children.length !== 0) {\n    seriesScope.symbolInnerColor = seriesScope.itemStyle.fill;\n  } else {\n    seriesScope.symbolInnerColor = '#fff';\n  }\n\n  return seriesScope;\n}\n\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel, seriesScope) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var seriesScope = getTreeNodeStyle(node, itemModel, seriesScope);\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.position[0],\n    y: sourceSymbolEl.position[1],\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, seriesScope);\n    symbolEl.attr('position', [sourceOldLayout.x, sourceOldLayout.y]);\n  } else {\n    symbolEl.updateData(data, dataIndex, seriesScope);\n  }\n\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  graphic.updateProps(symbolEl, {\n    position: [targetLayout.x, targetLayout.y]\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n\n  if (seriesScope.layout === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length = realRoot.children.length;\n    var rad;\n    var isLeft;\n\n    if (targetLayout.x === rootLayout.x && node.isExpand === true) {\n      var center = {};\n      center.x = (realRoot.children[0].getLayout().x + realRoot.children[length - 1].getLayout().x) / 2;\n      center.y = (realRoot.children[0].getLayout().y + realRoot.children[length - 1].getLayout().y) / 2;\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      isLeft = center.x < rootLayout.x;\n\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    var rotate = seriesScope.labelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    symbolPath.setStyle({\n      textPosition: seriesScope.labelModel.get('position') || textPosition,\n      textRotation: rotate == null ? -rad : labelRotateRadian,\n      textOrigin: 'center',\n      verticalAlign: 'middle'\n    });\n  }\n\n  if (node.parentNode && node.parentNode !== virtualRoot) {\n    var edge = symbolEl.__edge;\n\n    if (!edge) {\n      edge = symbolEl.__edge = new graphic.BezierCurve({\n        shape: getEdgeShape(seriesScope, sourceOldLayout, sourceOldLayout),\n        style: zrUtil.defaults({\n          opacity: 0,\n          strokeNoScale: true\n        }, seriesScope.lineStyle)\n      });\n    }\n\n    graphic.updateProps(edge, {\n      shape: getEdgeShape(seriesScope, sourceLayout, targetLayout),\n      style: {\n        opacity: 1\n      }\n    }, seriesModel);\n    group.add(edge);\n  }\n}\n\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel, seriesScope) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var itemModel = node.getModel();\n  var seriesScope = getTreeNodeStyle(node, itemModel, seriesScope);\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n\n  graphic.updateProps(symbolEl, {\n    position: [sourceLayout.x + 1, sourceLayout.y + 1]\n  }, seriesModel, function () {\n    group.remove(symbolEl);\n    data.setItemGraphicEl(dataIndex, null);\n  });\n  symbolEl.fadeOut(null, {\n    keepLabel: true\n  });\n  var edge = symbolEl.__edge;\n\n  if (edge) {\n    graphic.updateProps(edge, {\n      shape: getEdgeShape(seriesScope, sourceLayout, sourceLayout),\n      style: {\n        opacity: 0\n      }\n    }, seriesModel, function () {\n      group.remove(edge);\n    });\n  }\n}\n\nfunction getEdgeShape(seriesScope, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var orient = seriesScope.orient;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n\n  if (seriesScope.layout === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * seriesScope.curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * seriesScope.curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x,\n      y1: radialCoor1.y,\n      x2: radialCoor4.x,\n      y2: radialCoor4.y,\n      cpx1: radialCoor2.x,\n      cpy1: radialCoor2.y,\n      cpx2: radialCoor3.x,\n      cpy2: radialCoor3.y\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * seriesScope.curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * seriesScope.curvature;\n      cpy2 = y2;\n    }\n\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * seriesScope.curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * seriesScope.curvature;\n    }\n  }\n\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\n\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}