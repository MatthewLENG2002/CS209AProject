{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\nvar __DEV__ = _config.__DEV__;\nvar _util = require(\"zrender/lib/core/util\");\nvar createHashMap = _util.createHashMap;\nvar retrieve = _util.retrieve;\nvar each = _util.each;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\n\n/**\n * @return {Object} For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // It also indicate that whether there is category axis.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\nfunction getCoordSysDefineBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = {\n    coordSysName: coordSysName,\n    coordSysDims: [],\n    axisMap: createHashMap(),\n    categoryAxisMap: createHashMap()\n  };\n  var fetch = fetchers[coordSysName];\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis')[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis')[0];\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex = 1;\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis')[0];\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar')[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex = 1;\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n      if (isCategory(axisModel) && result.firstCategoryDimIndex == null) {\n        categoryAxisMap.set(axisDim, axisModel);\n        result.firstCategoryDimIndex = index;\n      }\n    });\n  }\n};\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}\nexports.getCoordSysDefineBySeries = getCoordSysDefineBySeries;","map":{"version":3,"names":["_config","require","__DEV__","_util","createHashMap","retrieve","each","getCoordSysDefineBySeries","seriesModel","coordSysName","get","result","coordSysDims","axisMap","categoryAxisMap","fetch","fetchers","cartesian2d","xAxisModel","getReferringComponents","yAxisModel","set","isCategory","firstCategoryDimIndex","singleAxis","singleAxisModel","polar","polarModel","radiusAxisModel","findAxisModel","angleAxisModel","geo","parallel","ecModel","parallelModel","getComponent","dimensions","slice","parallelAxisIndex","axisIndex","index","axisModel","axisDim","exports"],"sources":["/Users/tangxinyu/WebstormProjects/cs209a_proj/node_modules/echarts/lib/model/referHelper.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar retrieve = _util.retrieve;\nvar each = _util.each;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Helper for model references.\n * There are many manners to refer axis/coordSys.\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\n\n/**\n * @return {Object} For example:\n * {\n *     coordSysName: 'cartesian2d',\n *     coordSysDims: ['x', 'y', ...],\n *     axisMap: HashMap({\n *         x: xAxisModel,\n *         y: yAxisModel\n *     }),\n *     categoryAxisMap: HashMap({\n *         x: xAxisModel,\n *         y: undefined\n *     }),\n *     // It also indicate that whether there is category axis.\n *     firstCategoryDimIndex: 1,\n *     // To replace user specified encode.\n * }\n */\nfunction getCoordSysDefineBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = {\n    coordSysName: coordSysName,\n    coordSysDims: [],\n    axisMap: createHashMap(),\n    categoryAxisMap: createHashMap()\n  };\n  var fetch = fetchers[coordSysName];\n\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\n\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis')[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis')[0];\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex = 1;\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis')[0];\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar')[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex = 1;\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n\n      if (isCategory(axisModel) && result.firstCategoryDimIndex == null) {\n        categoryAxisMap.set(axisDim, axisModel);\n        result.firstCategoryDimIndex = index;\n      }\n    });\n  }\n};\n\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}\n\nexports.getCoordSysDefineBySeries = getCoordSysDefineBySeries;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}