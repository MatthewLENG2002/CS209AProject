{"ast":null,"code":"// TODO Draggable for group\n// FIXME Draggable on element which has parent rotation or scale\nfunction Draggable() {\n  this.on('mousedown', this._dragStart, this);\n  this.on('mousemove', this._drag, this);\n  this.on('mouseup', this._dragEnd, this);\n  this.on('globalout', this._dragEnd, this); // this._dropTarget = null;\n  // this._draggingTarget = null;\n  // this._x = 0;\n  // this._y = 0;\n}\n\nDraggable.prototype = {\n  constructor: Draggable,\n  _dragStart: function (e) {\n    var draggingTarget = e.target;\n    if (draggingTarget && draggingTarget.draggable) {\n      this._draggingTarget = draggingTarget;\n      draggingTarget.dragging = true;\n      this._x = e.offsetX;\n      this._y = e.offsetY;\n      this.dispatchToElement(param(draggingTarget, e), 'dragstart', e.event);\n    }\n  },\n  _drag: function (e) {\n    var draggingTarget = this._draggingTarget;\n    if (draggingTarget) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var dx = x - this._x;\n      var dy = y - this._y;\n      this._x = x;\n      this._y = y;\n      draggingTarget.drift(dx, dy, e);\n      this.dispatchToElement(param(draggingTarget, e), 'drag', e.event);\n      var dropTarget = this.findHover(x, y, draggingTarget).target;\n      var lastDropTarget = this._dropTarget;\n      this._dropTarget = dropTarget;\n      if (draggingTarget !== dropTarget) {\n        if (lastDropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(lastDropTarget, e), 'dragleave', e.event);\n        }\n        if (dropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(dropTarget, e), 'dragenter', e.event);\n        }\n      }\n    }\n  },\n  _dragEnd: function (e) {\n    var draggingTarget = this._draggingTarget;\n    if (draggingTarget) {\n      draggingTarget.dragging = false;\n    }\n    this.dispatchToElement(param(draggingTarget, e), 'dragend', e.event);\n    if (this._dropTarget) {\n      this.dispatchToElement(param(this._dropTarget, e), 'drop', e.event);\n    }\n    this._draggingTarget = null;\n    this._dropTarget = null;\n  }\n};\nfunction param(target, e) {\n  return {\n    target: target,\n    topTarget: e && e.topTarget\n  };\n}\nvar _default = Draggable;\nmodule.exports = _default;","map":{"version":3,"names":["Draggable","on","_dragStart","_drag","_dragEnd","prototype","constructor","e","draggingTarget","target","draggable","_draggingTarget","dragging","_x","offsetX","_y","offsetY","dispatchToElement","param","event","x","y","dx","dy","drift","dropTarget","findHover","lastDropTarget","_dropTarget","topTarget","_default","module","exports"],"sources":["/Users/tangxinyu/WebstormProjects/cs209a_proj/node_modules/zrender/lib/mixin/Draggable.js"],"sourcesContent":["// TODO Draggable for group\n// FIXME Draggable on element which has parent rotation or scale\nfunction Draggable() {\n  this.on('mousedown', this._dragStart, this);\n  this.on('mousemove', this._drag, this);\n  this.on('mouseup', this._dragEnd, this);\n  this.on('globalout', this._dragEnd, this); // this._dropTarget = null;\n  // this._draggingTarget = null;\n  // this._x = 0;\n  // this._y = 0;\n}\n\nDraggable.prototype = {\n  constructor: Draggable,\n  _dragStart: function (e) {\n    var draggingTarget = e.target;\n\n    if (draggingTarget && draggingTarget.draggable) {\n      this._draggingTarget = draggingTarget;\n      draggingTarget.dragging = true;\n      this._x = e.offsetX;\n      this._y = e.offsetY;\n      this.dispatchToElement(param(draggingTarget, e), 'dragstart', e.event);\n    }\n  },\n  _drag: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      var x = e.offsetX;\n      var y = e.offsetY;\n      var dx = x - this._x;\n      var dy = y - this._y;\n      this._x = x;\n      this._y = y;\n      draggingTarget.drift(dx, dy, e);\n      this.dispatchToElement(param(draggingTarget, e), 'drag', e.event);\n      var dropTarget = this.findHover(x, y, draggingTarget).target;\n      var lastDropTarget = this._dropTarget;\n      this._dropTarget = dropTarget;\n\n      if (draggingTarget !== dropTarget) {\n        if (lastDropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(lastDropTarget, e), 'dragleave', e.event);\n        }\n\n        if (dropTarget && dropTarget !== lastDropTarget) {\n          this.dispatchToElement(param(dropTarget, e), 'dragenter', e.event);\n        }\n      }\n    }\n  },\n  _dragEnd: function (e) {\n    var draggingTarget = this._draggingTarget;\n\n    if (draggingTarget) {\n      draggingTarget.dragging = false;\n    }\n\n    this.dispatchToElement(param(draggingTarget, e), 'dragend', e.event);\n\n    if (this._dropTarget) {\n      this.dispatchToElement(param(this._dropTarget, e), 'drop', e.event);\n    }\n\n    this._draggingTarget = null;\n    this._dropTarget = null;\n  }\n};\n\nfunction param(target, e) {\n  return {\n    target: target,\n    topTarget: e && e.topTarget\n  };\n}\n\nvar _default = Draggable;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}