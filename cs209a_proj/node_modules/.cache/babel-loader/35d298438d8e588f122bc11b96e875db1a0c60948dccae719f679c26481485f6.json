{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'cloudWork',\n  props: {\n    width: {\n      type: Number,\n      default: 300\n    },\n    height: {\n      type: Number,\n      default: 300\n    },\n    // 测试数据\n    data: {\n      type: Array,\n      default: () => [{\n        name: '安氏一类',\n        value: 100\n      }, {\n        name: '安氏二类',\n        value: 30\n      }, {\n        name: '安氏三类',\n        value: 30\n      }, {\n        name: '安氏四类',\n        value: 30\n      }, {\n        name: '安氏五类',\n        value: 30\n      }]\n    }\n  },\n  data: () => ({\n    color: ['#2D4DB6', '#04B67C', '#D1AF07', '#E27914', '#CB4A4D', '#B02690'],\n    contentEle: [],\n    direction: '-1',\n    speed: 400,\n    animateID: null\n  }),\n  created() {\n    this.contentEle = this.data.map(() => ({\n      x: 0,\n      y: 0,\n      z: 0,\n      style: {}\n    }));\n  },\n  mounted() {\n    this.innit();\n  },\n  methods: {\n    innit() {\n      const RADIUSX = (this.width - 50) / 2;\n      const RADIUSY = (this.height - 50) / 2;\n      this.contentEle = [];\n      for (let i = 0; i < this.data.length; i += 1) {\n        const k = -1 + (2 * (i + 1) - 1) / this.data.length;\n        const a = Math.acos(k);\n        const b = a * Math.sqrt(this.data.length * Math.PI);\n        const x = RADIUSX * Math.sin(a) * Math.cos(b);\n        const y = RADIUSY * Math.sin(a) * Math.sin(b);\n        const z = RADIUSX * Math.cos(a);\n        const singleEle = {\n          x,\n          y,\n          z,\n          style: {}\n        };\n        this.contentEle.push(singleEle);\n      }\n      this.animate();\n    },\n    animate() {\n      this.rotateX();\n      this.rotateY();\n      this.move();\n      this.animateID = window.requestAnimationFrame(this.animate);\n    },\n    rotateX() {\n      const angleX = ['-1', '1'].includes(this.direction) ? Math.PI / Infinity : Math.PI / (Number(this.direction) / 2 * Number(this.speed));\n      const cos = Math.cos(angleX);\n      const sin = Math.sin(angleX);\n      this.contentEle = this.contentEle.map(t => {\n        const y1 = t.y * cos - t.z * sin;\n        const z1 = t.z * cos + t.y * sin;\n        return {\n          ...t,\n          y: y1,\n          z: z1\n        };\n      });\n    },\n    rotateY() {\n      const angleY = ['-2', '2'].includes(this.direction) ? Math.PI / Infinity : Math.PI / (Number(this.direction) * Number(this.speed));\n      const cos = Math.cos(angleY);\n      const sin = Math.sin(angleY);\n      this.contentEle = this.contentEle.map(t => {\n        const x1 = t.x * cos - t.z * sin;\n        const z1 = t.z * cos + t.x * sin;\n        return {\n          ...t,\n          x: x1,\n          z: z1\n        };\n      });\n    },\n    move() {\n      const CX = this.width / 2;\n      const CY = this.height / 2;\n      this.contentEle = this.contentEle.map(singleEle => {\n        const {\n          x,\n          y,\n          z\n        } = singleEle;\n        const fallLength = 500;\n        const RADIUS = (this.width - 50) / 2;\n        const scale = fallLength / (fallLength - z);\n        const alpha = (z + RADIUS) / (2 * RADIUS);\n        const left = `${x + CX - 15}px`;\n        const top = `${y + CY - 15}px`;\n        const transform = `translate(${left}, ${top}) scale(${scale})`;\n        const style = {\n          ...singleEle.style,\n          opacity: alpha + 0.5,\n          zIndex: parseInt(scale * 100, 10),\n          transform\n        };\n        return {\n          x,\n          y,\n          z,\n          style\n        };\n      });\n    },\n    // 鼠标移入暂停\n    stop() {\n      window.cancelAnimationFrame(this.animateID);\n    },\n    // 鼠标离开恢复\n    start() {\n      this.animate();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","props","width","type","Number","default","height","data","Array","value","color","contentEle","direction","speed","animateID","created","map","x","y","z","style","mounted","innit","methods","RADIUSX","RADIUSY","i","length","k","a","Math","acos","b","sqrt","PI","sin","cos","singleEle","push","animate","rotateX","rotateY","move","window","requestAnimationFrame","angleX","includes","Infinity","t","y1","z1","angleY","x1","CX","CY","fallLength","RADIUS","scale","alpha","left","top","transform","opacity","zIndex","parseInt","stop","cancelAnimationFrame","start"],"sourceRoot":"","sources":["/Users/tangxinyu/WebstormProjects/cs209a_proj/src/components/NounCloud.vue"],"sourcesContent":["<template>\n  <div>\n    <div\n        class=\"wordCloud__tagBall\"\n        :style=\"{width:`${this.width}px`,height:`${this.height}px`}\"\n        @mouseenter=\"stop\"\n        @mouseleave=\"start\"\n    >\n      <span\n          class=\"wordCloud__tag\"\n          v-for=\"(item, index) of data\"\n          :key=\"index\"\n          :style=\"{color:color[index % color.length],...contentEle[index].style}\"\n          :title=\"item.name+item.value\"\n      >{{item.name}}</span>\n    </div>\n  </div>\n</template>\n\n\n<script>\nexport default {\n  name: 'cloudWork',\n  props: {\n    width: {\n      type: Number,\n      default: 300\n    },\n    height: {\n      type: Number,\n      default: 300\n    },\n    // 测试数据\n    data: {\n      type: Array,\n      default: () => [\n        {\n          name: '安氏一类',\n          value: 100\n        },\n        {\n          name: '安氏二类',\n          value: 30\n        },\n        {\n          name: '安氏三类',\n          value: 30\n        },\n        {\n          name: '安氏四类',\n          value: 30\n        },\n        {\n          name: '安氏五类',\n          value: 30\n        },\n      ]\n    }\n  },\n  data: () => ({\n    color: ['#2D4DB6', '#04B67C', '#D1AF07', '#E27914', '#CB4A4D', '#B02690'],\n    contentEle: [],\n    direction: '-1',\n    speed: 400,\n    animateID: null\n  }),\n  created() {\n    this.contentEle = this.data.map(() => ({\n      x: 0,\n      y: 0,\n      z: 0,\n      style: {}\n    }));\n  },\n  mounted() {\n    this.innit();\n  },\n  methods: {\n    innit() {\n      const RADIUSX = (this.width - 50) / 2;\n      const RADIUSY = (this.height - 50) / 2;\n      this.contentEle = [];\n      for (let i = 0; i < this.data.length; i += 1) {\n        const k = -1 + (2 * (i + 1) - 1) / this.data.length;\n        const a = Math.acos(k);\n        const b = a * Math.sqrt(this.data.length * Math.PI);\n        const x = RADIUSX * Math.sin(a) * Math.cos(b);\n        const y = RADIUSY * Math.sin(a) * Math.sin(b);\n        const z = RADIUSX * Math.cos(a);\n        const singleEle = {\n          x,\n          y,\n          z,\n          style: {}\n        };\n        this.contentEle.push(singleEle);\n      }\n      this.animate();\n    },\n    animate() {\n      this.rotateX();\n      this.rotateY();\n      this.move();\n      this.animateID = window.requestAnimationFrame(this.animate);\n    },\n    rotateX() {\n      const angleX = ['-1', '1'].includes(this.direction)\n          ? Math.PI / Infinity\n          : Math.PI / ((Number(this.direction) / 2) * Number(this.speed));\n      const cos = Math.cos(angleX);\n      const sin = Math.sin(angleX);\n\n      this.contentEle = this.contentEle.map((t) => {\n        const y1 = t.y * cos - t.z * sin;\n        const z1 = t.z * cos + t.y * sin;\n        return {\n          ...t,\n          y: y1,\n          z: z1\n        };\n      });\n    },\n    rotateY() {\n      const angleY = ['-2', '2'].includes(this.direction)\n          ? Math.PI / Infinity\n          : Math.PI / (Number(this.direction) * Number(this.speed));\n      const cos = Math.cos(angleY);\n      const sin = Math.sin(angleY);\n      this.contentEle = this.contentEle.map((t) => {\n        const x1 = t.x * cos - t.z * sin;\n        const z1 = t.z * cos + t.x * sin;\n        return {\n          ...t,\n          x: x1,\n          z: z1\n        };\n      });\n    },\n    move() {\n      const CX = this.width / 2;\n      const CY = this.height / 2;\n      this.contentEle = this.contentEle.map((singleEle) => {\n        const { x, y, z } = singleEle;\n        const fallLength = 500;\n        const RADIUS = (this.width - 50) / 2;\n        const scale = fallLength / (fallLength - z);\n        const alpha = (z + RADIUS) / (2 * RADIUS);\n        const left = `${x + CX - 15}px`;\n        const top = `${y + CY - 15}px`;\n        const transform = `translate(${left}, ${top}) scale(${scale})`;\n        const style = {\n          ...singleEle.style,\n          opacity: alpha + 0.5,\n          zIndex: parseInt(scale * 100, 10),\n          transform\n        };\n        return {\n          x,\n          y,\n          z,\n          style\n        };\n      });\n    },\n    // 鼠标移入暂停\n    stop() {\n      window.cancelAnimationFrame(this.animateID);\n    },\n    // 鼠标离开恢复\n    start() {\n      this.animate();\n    }\n  }\n};\n</script>\n\n\n<style  scoped>\nbutton {\n  margin: 20px;\n}\n.wordCloud__tagBall {\n  margin: 50px auto;\n  position: relative;\n}\n\n.wordCloud__tag {\n  display: block;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  color: green;\n  text-decoration: none;\n  font-size: 15px;\n  font-family: '微软雅黑';\n  font-weight: bold;\n}\n.wordCloud__tag :hover {\n  color: red;\n}\n\n.wordCloud__home {\n  display: flex;\n  justify-content: center;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}